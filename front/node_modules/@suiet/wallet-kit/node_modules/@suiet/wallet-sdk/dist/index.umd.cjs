(function(tt,Xe){typeof exports=="object"&&typeof module<"u"?Xe(exports,require("@mysten/sui.js")):typeof define=="function"&&define.amd?define(["exports","@mysten/sui.js"],Xe):(tt=typeof globalThis<"u"?globalThis:tt||self,Xe(tt.suietWalletSdk={},tt.Sui))})(this,function(tt,Xe){"use strict";var f0=Object.defineProperty;var a0=(tt,Xe,Xt)=>Xe in tt?f0(tt,Xe,{enumerable:!0,configurable:!0,writable:!0,value:Xt}):tt[Xe]=Xt;var Rt=(tt,Xe,Xt)=>(a0(tt,typeof Xe!="symbol"?Xe+"":Xe,Xt),Xt);class Xt{constructor(t,n){Rt(this,"provider");Rt(this,"address");this.provider=t,this.address=n}async get(t=Xe.SUI_TYPE_ARG){return(await this.getAllCoins()).find(s=>s.typeArg===t)?.balance||BigInt(0)}async getAllCoins(){const t=await this.provider.query.getOwnedCoins(this.address),n=new Map;for(const i of t)n.has(i.typeArg)?n.set(i.typeArg,n.get(i.typeArg)+i.balance):n.set(i.typeArg,i.balance);return Array.from(n.entries()).map(i=>({typeArg:i[0],balance:i[1]}))}}class Jo{constructor(t,n){Rt(this,"balance");this.balance=new Xt(t,n)}}const Qn="0x2::coin::Coin";class zr{constructor(t,n,i){Rt(this,"_objectId");Rt(this,"_typeArg");Rt(this,"_balance");Rt(this,"_symbol");this._objectId=t,this._balance=i,this._typeArg=n,this._symbol=dr.getCoinSymbol(n)}get objectId(){return this._objectId}get typeArg(){return this._typeArg}get balance(){return this._balance}get symbol(){return this._symbol}static fromDto(t){return new zr(t.objectId,t.typeArg,t.balance)}toDto(){return{objectId:this._objectId,balance:this._balance,typeArg:this._typeArg,symbol:this._symbol}}toString(){return JSON.stringify(this.toDto())}}class dr{static isCoin(t){return t.type.startsWith(Qn)}static isSUI(t){const n=dr.getCoinTypeArg(t);return n?dr.getCoinSymbol(n)==="SUI":!1}static getCoinObject(t){const n=Xe.Coin.getCoinTypeArg(t);if(!n)throw new Error("coin typeArg cannot be null");return new zr(t.fields.id.id,n,BigInt(t.fields.balance))}static getBalance(t){return BigInt(t.fields.balance)}static getCoinTypeArg(t){return Xe.Coin.getCoinTypeArg(t)}static getCoinSymbol(t){return t.substring(t.lastIndexOf(":")+1)}static getCoinTypeFromArg(t){return`${Qn}<${t}>`}}class ei{static isNft(t){return!!(t.fields.name&&t.fields.description&&t.fields.url)}static getNftObject(t,n){return{objectId:t.fields.id.id,name:t.fields.name,description:t.fields.description,url:t.fields.url,previousTransaction:n,objectType:t.type}}}const Qo="0x0000000000000000000000000000000000000005";class es{constructor(t){Rt(this,"query");this.query=new ts(t)}}class ts{constructor(t){Rt(this,"provider");this.provider=new Xe.JsonRpcProvider(new Xe.Connection({fullnode:t}))}async getOwnedObjects(t){let n=!0,i=null,s=[];for(;n;){const h=await this.provider.getOwnedObjects({owner:t,cursor:i,options:{showType:!0,showDisplay:!0,showContent:!0,showOwner:!0}});h.data?.forEach(b=>{const l=Xe.getSuiObjectData(b);l&&s.push(l)}),n=h.hasNextPage,i=h.nextCursor}return s}async getOwnedCoins(t){return(await this.getOwnedObjects(t)).map(s=>({id:s.objectId,object:Xe.getMoveObject(s)})).filter(s=>s.object&&Xe.Coin.isCoin(s.object)).map(s=>dr.getCoinObject(s.object))}async getOwnedNfts(t){return(await this.getOwnedObjects(t)).map(s=>({id:s.objectId,object:Xe.getMoveObject(s),previousTransaction:s.previousTransaction})).filter(s=>s.object&&ei.isNft(s.object)).map(s=>{const h=s.object;return ei.getNftObject(h,s.previousTransaction??null)})}}const ti=1e6,Yr=1e9,Wr=1e12;function rs(e,t){return Zr(e,Object.assign({decimals:9},t))}function Zr(e,t){const{decimals:n=0,withAbbr:i=!0}=t??{};if(typeof e=="bigint"&&!is(e))return ni(BigInt(e),{decimals:n,withAbbr:i});if(Number(e)===0)return"0";if(Number(e)<0)return"-"+Zr(-Number(e),t);const s=Number(e)/10**n;return s>0&&s<1?ns(s):ri(s,i)}function ri(e,t){if(t){if(e>=ti&&e<Yr)return Fr(e,ti,"M");if(e>=Yr&&e<Wr)return Fr(e,Yr,"B");if(e>=Wr)return Fr(e,Wr,"T")}return Intl.NumberFormat("en-US").format(e)}function Fr(e,t,n){let i;typeof e=="bigint"?i=String(e/(BigInt(t)/1000n)):i=String(Math.floor(e/(t/1e3)));const s=i.padEnd(4,"0");return Intl.NumberFormat("en-US").format(Number(s)).replace(",",".")+n}function ns(e){if(e<=0)return"0";const t=Math.ceil(-Math.log10(e));return Number(e)%Math.pow(10,10-(t+2))===0&&Number(e)%Math.pow(10,10-(t+1))===0?Xr(e,t):Number(e)%Math.pow(10,10-(t+2))===0&&Number(e)%Math.pow(10,10-(t+1))!==0?Xr(e,t+1):Xr(e,t+2)}function Xr(e,t){function n(i){if(isNaN(i))return i.toString();const s=""+i;return/e/i.test(s)?i.toFixed(18).replace(/\.?0+$/,""):i.toString()}return t=t||0,t=Math.pow(10,t),n(Math.floor(e*t)/t)}function ni(e,t){if(e===0n)return"0";if(e<0n)return"-"+ni(-e,t);const{decimals:n=9,withAbbr:i=!0}=t??{},s=e/10n**BigInt(n);return ri(s,i)}function is(e){const t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER;return e>=BigInt(t)&&e<=BigInt(n)}function os(e){return typeof e!="string"?"":!e||!e.startsWith("0x")?e:e.slice(0,7)+"...."+e.slice(-4,e.length)}function ss(e){var t=e.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}),n}var ii={exports:{}};function fs(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),h=s.charCodeAt(0);if(t[h]!==255)throw new TypeError(s+" is ambiguous");t[h]=i}var u=e.length,b=e.charAt(0),l=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function B(U){if(U instanceof Uint8Array||(ArrayBuffer.isView(U)?U=new Uint8Array(U.buffer,U.byteOffset,U.byteLength):Array.isArray(U)&&(U=Uint8Array.from(U))),!(U instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(U.length===0)return"";for(var $=0,D=0,Z=0,pe=U.length;Z!==pe&&U[Z]===0;)Z++,$++;for(var v=(pe-Z)*p+1>>>0,m=new Uint8Array(v);Z!==pe;){for(var d=U[Z],V=0,S=v-1;(d!==0||V<D)&&S!==-1;S--,V++)d+=256*m[S]>>>0,m[S]=d%u>>>0,d=d/u>>>0;if(d!==0)throw new Error("Non-zero carry");D=V,Z++}for(var j=v-D;j!==v&&m[j]===0;)j++;for(var W=b.repeat($);j<v;++j)W+=e.charAt(m[j]);return W}function w(U){if(typeof U!="string")throw new TypeError("Expected String");if(U.length===0)return new Uint8Array;for(var $=0,D=0,Z=0;U[$]===b;)D++,$++;for(var pe=(U.length-$)*l+1>>>0,v=new Uint8Array(pe);U[$];){var m=t[U.charCodeAt($)];if(m===255)return;for(var d=0,V=pe-1;(m!==0||d<Z)&&V!==-1;V--,d++)m+=u*v[V]>>>0,v[V]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");Z=d,$++}for(var S=pe-Z;S!==pe&&v[S]===0;)S++;for(var j=new Uint8Array(D+(pe-S)),W=D;S!==pe;)j[W++]=v[S++];return j}function O(U){var $=w(U);if($)return $;throw new Error("Non-base"+u+" character")}return{encode:B,decodeUnsafe:w,decode:O}}var as=fs,cs=as("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),us=Object.create,Sr=Object.defineProperty,ls=Object.getOwnPropertyDescriptor,hs=Object.getOwnPropertyNames,ds=Object.getPrototypeOf,bs=Object.prototype.hasOwnProperty,ys=(e,t)=>{for(var n in t)Sr(e,n,{get:t[n],enumerable:!0})},oi=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of hs(t))!bs.call(e,s)&&s!==n&&Sr(e,s,{get:()=>t[s],enumerable:!(i=ls(t,s))||i.enumerable});return e},ps=(e,t,n)=>(n=e!=null?us(ds(e)):{},oi(t||!e||!e.__esModule?Sr(n,"default",{value:e,enumerable:!0}):n,e)),gs=e=>oi(Sr({},"__esModule",{value:!0}),e),si={};ys(si,{BCS:()=>qe,BcsReader:()=>ci,BcsWriter:()=>ui,decodeStr:()=>hi,encodeStr:()=>li,fromB58:()=>en,fromB64:()=>Br,fromHEX:()=>Or,getRustConfig:()=>vs,getSuiMoveConfig:()=>ms,registerPrimitives:()=>di,splitGenericParameters:()=>bi,toB58:()=>Qr,toB64:()=>Tr,toHEX:()=>Pr});var vt=gs(si);function xs(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:e===43?62:e===47?63:0}function Br(e,t){for(var n=e.replace(/[^A-Za-z0-9+/]/g,""),i=n.length,s=t?Math.ceil((i*3+1>>2)/t)*t:i*3+1>>2,h=new Uint8Array(s),u,b,l=0,p=0,B=0;B<i;B++)if(b=B&3,l|=xs(n.charCodeAt(B))<<6*(3-b),b===3||i-B===1){for(u=0;u<3&&p<s;u++,p++)h[p]=l>>>(16>>>u&24)&255;l=0}return h}function Ar(e){return e<26?e+65:e<52?e+71:e<62?e-4:e===62?43:e===63?47:65}function Tr(e){for(var t=2,n="",i=e.length,s=0,h=0;h<i;h++)t=h%3,s|=e[h]<<(16>>>t&24),(t===2||e.length-h===1)&&(n+=String.fromCodePoint(Ar(s>>>18&63),Ar(s>>>12&63),Ar(s>>>6&63),Ar(s&63)),s=0);return n.slice(0,n.length-2+t)+(t===2?"":t===1?"=":"==")}function Or(e){let t=e.replace("0x","").match(/.{1,2}/g).map(n=>parseInt(n,16));if(t===null)throw new Error(`Unable to parse HEX: ${e}`);return Uint8Array.from(t)}function Pr(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}var fi=ps(cs),ai=32;function Jr(e,t){let n=new Uint8Array(t),i=0;for(;e>0;)n[i]=Number(e%BigInt(256)),e=e/BigInt(256),i+=1;return n}var Qr=e=>fi.default.encode(e),en=e=>fi.default.decode(e),ci=class{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),n=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let e=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let e=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:n,length:i}=_s(t);return this.shift(i),n}readVec(e){let t=this.readULEB(),n=[];for(let i=0;i<t;i++)n.push(e(this,i,t));return n}},ui=class{constructor({size:e=1024,maxSize:t,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t||e,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(t>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=n;const i=new ArrayBuffer(this.size);new Uint8Array(i).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(i)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return Jr(BigInt(e),8).forEach(t=>this.write8(t)),this}write128(e){return Jr(BigInt(e),16).forEach(t=>this.write8(t)),this}write256(e){return Jr(BigInt(e),32).forEach(t=>this.write8(t)),this}writeULEB(e){return ws(e).forEach(t=>this.write8(t)),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach((n,i)=>t(this,n,i,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return li(this.toBytes(),e)}};function ws(e){let t=[],n=0;if(e===0)return[0];for(;e>0;)t[n]=e&127,(e>>=7)&&(t[n]|=128),n+=1;return t}function _s(e){let t=0,n=0,i=0;for(;;){let s=e[i];if(i+=1,t|=(s&127)<<n,(s&128)===0)break;n+=7}return{value:t,length:i}}var br=class{constructor(e){if(this.types=new Map,this.counter=0,e instanceof br){this.schema=e.schema,this.types=new Map(e.types);return}if(this.schema=e,this.registerAddressType(br.ADDRESS,e.addressLength,e.addressEncoding),this.registerVectorType(e.vectorType),e.types&&e.types.structs)for(let t of Object.keys(e.types.structs))this.registerStructType(t,e.types.structs[t]);if(e.types&&e.types.enums)for(let t of Object.keys(e.types.enums))this.registerEnumType(t,e.types.enums[t]);if(e.types&&e.types.aliases)for(let t of Object.keys(e.types.aliases))this.registerAlias(t,e.types.aliases[t]);e.withPrimitives!==!1&&di(this)}tempKey(){return`bcs-struct-${++this.counter}`}ser(e,t,n){if(typeof e=="string"||Array.isArray(e)){const{name:i,params:s}=this.parseTypeName(e);return this.getTypeInterface(i).encode(this,t,n,s)}if(typeof e=="object"){const i=this.tempKey();return new br(this).registerStructType(i,e).ser(i,t,n)}throw new Error(`Incorrect type passed into the '.ser()' function. 
${JSON.stringify(e)}`)}de(e,t,n){if(typeof t=="string")if(n)t=hi(t,n);else throw new Error("To pass a string to `bcs.de`, specify encoding");if(typeof e=="string"||Array.isArray(e)){const{name:i,params:s}=this.parseTypeName(e);return this.getTypeInterface(i).decode(this,t,s)}if(typeof e=="object"){const i=new br(this),s=this.tempKey();return i.registerStructType(s,e).de(s,t,n)}throw new Error(`Incorrect type passed into the '.de()' function. 
${JSON.stringify(e)}`)}hasType(e){return this.types.has(e)}registerAlias(e,t){return this.types.set(e,t),this}registerType(e,t,n,i=()=>!0){const{name:s,params:h}=this.parseTypeName(e);return this.types.set(s,{encode(u,b,l,p){const B=h.reduce((w,O,U)=>Object.assign(w,{[O]:p[U]}),{});return this._encodeRaw.call(u,new ui(l),b,p,B)},decode(u,b,l){const p=h.reduce((B,w,O)=>Object.assign(B,{[w]:l[O]}),{});return this._decodeRaw.call(u,new ci(b),l,p)},_encodeRaw(u,b,l,p){if(i(b))return t.call(this,u,b,l,p);throw new Error(`Validation failed for type ${s}, data: ${b}`)},_decodeRaw(u,b,l){return n.call(this,u,b,l)}}),this}registerAddressType(e,t,n="hex"){switch(n){case"base64":return this.registerType(e,function(s,h){return Br(h).reduce((u,b)=>u.write8(b),s)},function(s){return Tr(s.readBytes(t))});case"hex":return this.registerType(e,function(s,h){return Or(h).reduce((u,b)=>u.write8(b),s)},function(s){return Pr(s.readBytes(t))});default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(e){let{name:t,params:n}=this.parseTypeName(e);if(n.length>1)throw new Error("Vector can have only one type parameter; got "+t);return this.registerType(e,function(s,h,u,b){return s.writeVec(h,(l,p)=>{let B=u[0];if(!B)throw new Error(`Incorrect number of type parameters passed a to vector '${e}'`);let{name:w,params:O}=this.parseTypeName(B);if(this.hasType(w))return this.getTypeInterface(w)._encodeRaw.call(this,l,p,O,b);if(!(w in b))throw new Error(`Unable to find a matching type definition for ${w} in vector; make sure you passed a generic`);let{name:U,params:$}=this.parseTypeName(b[w]);return this.getTypeInterface(U)._encodeRaw.call(this,l,p,$,b)})},function(s,h,u){return s.readVec(b=>{let l=h[0];if(!l)throw new Error(`Incorrect number of type parameters passed to a vector '${e}'`);let{name:p,params:B}=this.parseTypeName(l);if(this.hasType(p))return this.getTypeInterface(p)._decodeRaw.call(this,b,B,u);if(!(p in u))throw new Error(`Unable to find a matching type definition for ${p} in vector; make sure you passed a generic`);let{name:w,params:O}=this.parseTypeName(u[p]);return this.getTypeInterface(w)._decodeRaw.call(this,b,O,u)})})}registerStructType(e,t){for(let u in t){let b=this.tempKey(),l=t[u];!Array.isArray(l)&&typeof l!="string"&&(t[u]=b,this.registerStructType(b,l))}let n=Object.freeze(t),i=Object.keys(n),{name:s,params:h}=this.parseTypeName(e);return this.registerType(e,function(b,l,p,B){if(!l||l.constructor!==Object)throw new Error(`Expected ${s} to be an Object, got: ${l}`);if(p.length!==h.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${h.length}, got: ${p.length}`);for(let w of i){if(!(w in l))throw new Error(`Struct ${s} requires field ${w}:${n[w]}`);const{name:O,params:U}=this.parseTypeName(n[w]);if(!h.includes(O))this.getTypeInterface(O)._encodeRaw.call(this,b,l[w],U,B);else{const $=h.indexOf(O);let{name:D,params:Z}=this.parseTypeName(p[$]);if(this.hasType(D)){this.getTypeInterface(D)._encodeRaw.call(this,b,l[w],Z,B);continue}if(!(D in B))throw new Error(`Unable to find a matching type definition for ${D} in ${s}; make sure you passed a generic`);let{name:pe,params:v}=this.parseTypeName(B[D]);this.getTypeInterface(pe)._encodeRaw.call(this,b,l[w],v,B)}}return b},function(b,l,p){if(l.length!==h.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${h.length}, got: ${l.length}`);let B={};for(let w of i){const{name:O,params:U}=this.parseTypeName(n[w]);if(!h.includes(O))B[w]=this.getTypeInterface(O)._decodeRaw.call(this,b,U,p);else{const $=h.indexOf(O);let{name:D,params:Z}=this.parseTypeName(l[$]);if(this.hasType(D)){B[w]=this.getTypeInterface(D)._decodeRaw.call(this,b,Z,p);continue}if(!(D in p))throw new Error(`Unable to find a matching type definition for ${D} in ${s}; make sure you passed a generic`);let{name:pe,params:v}=this.parseTypeName(p[D]);B[w]=this.getTypeInterface(pe)._decodeRaw.call(this,b,v,p)}}return B})}registerEnumType(e,t){for(let u in t){let b=this.tempKey(),l=t[u];l!==null&&!Array.isArray(l)&&typeof l!="string"&&(t[u]=b,this.registerStructType(b,l))}let n=Object.freeze(t),i=Object.keys(n),{name:s,params:h}=this.parseTypeName(e);return this.registerType(e,function(b,l,p,B){if(!l)throw new Error(`Unable to write enum "${s}", missing data.
Received: "${l}"`);if(typeof l!="object")throw new Error(`Incorrect data passed into enum "${s}", expected object with properties: "${i.join(" | ")}".
Received: "${JSON.stringify(l)}"`);let w=Object.keys(l)[0];if(w===void 0)throw new Error(`Empty object passed as invariant of the enum "${s}"`);let O=i.indexOf(w);if(O===-1)throw new Error(`Unknown invariant of the enum "${s}", allowed values: "${i.join(" | ")}"; received "${w}"`);let U=i[O],$=n[U];if(b.write8(O),$===null)return b;let D=h.indexOf($),Z=D===-1?$:p[D];{let{name:pe,params:v}=this.parseTypeName(Z);return this.getTypeInterface(pe)._encodeRaw.call(this,b,l[w],v,B)}},function(b,l,p){let B=b.readULEB(),w=i[B],O=n[w];if(B===-1)throw new Error(`Decoding type mismatch, expected enum "${s}" invariant index, received "${B}"`);if(O===null)return{[w]:!0};let U=h.indexOf(O),$=U===-1?O:l[U];{let{name:D,params:Z}=this.parseTypeName($);return{[w]:this.getTypeInterface(D)._decodeRaw.call(this,b,Z,p)}}})}getTypeInterface(e){let t=this.types.get(e);if(typeof t=="string"){let n=[];for(;typeof t=="string";){if(n.includes(t))throw new Error(`Recursive definition found: ${n.join(" -> ")} -> ${t}`);n.push(t),t=this.types.get(t)}}if(t===void 0)throw new Error(`Type ${e} is not registered`);return t}parseTypeName(e){if(Array.isArray(e)){let[b,...l]=e;return{name:b,params:l}}if(typeof e!="string")throw new Error(`Illegal type passed as a name of the type: ${e}`);let[t,n]=this.schema.genericSeparators||["<",">"],i=e.indexOf(t),s=Array.from(e).reverse().indexOf(n);if(i===-1&&s===-1)return{name:e,params:[]};if(i===-1||s===-1)throw new Error(`Unclosed generic in name '${e}'`);let h=e.slice(0,i),u=bi(e.slice(i+1,e.length-s-1),this.schema.genericSeparators);return{name:h,params:u}}},qe=br;qe.U8="u8",qe.U16="u16",qe.U32="u32",qe.U64="u64",qe.U128="u128",qe.U256="u256",qe.BOOL="bool",qe.VECTOR="vector",qe.ADDRESS="address",qe.STRING="string",qe.HEX="hex-string",qe.BASE58="base58-string",qe.BASE64="base64-string";function li(e,t){switch(t){case"base58":return Qr(e);case"base64":return Tr(e);case"hex":return Pr(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function hi(e,t){switch(t){case"base58":return en(e);case"base64":return Br(e);case"hex":return Or(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function di(e){e.registerType(qe.U8,function(t,n){return t.write8(n)},function(t){return t.read8()},t=>t<256),e.registerType(qe.U16,function(t,n){return t.write16(n)},function(t){return t.read16()},t=>t<65536),e.registerType(qe.U32,function(t,n){return t.write32(n)},function(t){return t.read32()},t=>t<=4294967296n),e.registerType(qe.U64,function(t,n){return t.write64(n)},function(t){return t.read64()}),e.registerType(qe.U128,function(t,n){return t.write128(n)},function(t){return t.read128()}),e.registerType(qe.U256,function(t,n){return t.write256(n)},function(t){return t.read256()}),e.registerType(qe.BOOL,function(t,n){return t.write8(n)},function(t){return t.read8().toString(10)==="1"}),e.registerType(qe.STRING,function(t,n){return t.writeVec(Array.from(n),(i,s)=>i.write8(s.charCodeAt(0)))},function(t){return t.readVec(n=>n.read8()).map(n=>String.fromCharCode(Number(n))).join("")},t=>!0),e.registerType(qe.HEX,function(t,n){return t.writeVec(Array.from(Or(n)),(i,s)=>i.write8(s))},function(t){let n=t.readVec(i=>i.read8());return Pr(new Uint8Array(n))}),e.registerType(qe.BASE58,function(t,n){return t.writeVec(Array.from(en(n)),(i,s)=>i.write8(s))},function(t){let n=t.readVec(i=>i.read8());return Qr(new Uint8Array(n))}),e.registerType(qe.BASE64,function(t,n){return t.writeVec(Array.from(Br(n)),(i,s)=>i.write8(s))},function(t){let n=t.readVec(i=>i.read8());return Tr(new Uint8Array(n))})}function vs(){return{genericSeparators:["<",">"],vectorType:"Vec",addressLength:ai,addressEncoding:"hex"}}function ms(){return{genericSeparators:["<",">"],vectorType:"vector",addressLength:ai,addressEncoding:"hex"}}function bi(e,t=["<",">"]){const[n,i]=t,s=[];let h="",u=0;for(let b=0;b<e.length;b++){const l=e[b];if(l===n&&u++,l===i&&u--,u===0&&l===","){s.push(h.trim()),h="";continue}h+=l}return s.push(h.trim()),s}var tn=Object.defineProperty,Es=Object.getOwnPropertyDescriptor,Ss=Object.getOwnPropertyNames,Bs=Object.prototype.hasOwnProperty,As=(e,t)=>{for(var n in t)tn(e,n,{get:t[n],enumerable:!0})},Ts=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Ss(t))!Bs.call(e,s)&&s!==n&&tn(e,s,{get:()=>t[s],enumerable:!(i=Es(t,s))||i.enumerable});return e},Os=e=>Ts(tn({},"__esModule",{value:!0}),e),yi={};As(yi,{bcs:()=>nn,isPureArg:()=>Ps});var rn=Os(yi),ct=vt;function Ps(e){return e.Pure!==void 0}const rr="vector",Is={kind:"TransactionKind",sender:ct.BCS.ADDRESS,gasData:"GasData",expiration:"TransactionExpiration"},Us={enums:{"Option<T>":{None:null,Some:"T"},ObjectArg:{ImmOrOwned:"SuiObjectRef",Shared:"SharedObjectRef"},CallArg:{Pure:[rr,ct.BCS.U8],Object:"ObjectArg",ObjVec:[rr,"ObjectArg"]},TypeTag:{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:"TypeTag",struct:"StructTag",u16:null,u32:null,u256:null},TransactionKind:{ProgrammableTransaction:"ProgrammableTransaction",ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null},TransactionExpiration:{None:null,Epoch:"unsafe_u64"},TransactionData:{V1:"TransactionDataV1"}},structs:{SuiObjectRef:{objectId:ct.BCS.ADDRESS,version:ct.BCS.U64,digest:"ObjectDigest"},SharedObjectRef:{objectId:ct.BCS.ADDRESS,initialSharedVersion:ct.BCS.U64,mutable:ct.BCS.BOOL},StructTag:{address:ct.BCS.ADDRESS,module:ct.BCS.STRING,name:ct.BCS.STRING,typeParams:[rr,"TypeTag"]},GasData:{payment:[rr,"SuiObjectRef"],owner:ct.BCS.ADDRESS,price:ct.BCS.U64,budget:ct.BCS.U64},SenderSignedData:{data:"TransactionData",txSignatures:[rr,[rr,ct.BCS.U8]]},TransactionDataV1:Is},aliases:{ObjectDigest:ct.BCS.BASE58}},nn=new ct.BCS({...(0,ct.getSuiMoveConfig)(),types:Us});nn.registerType("utf8string",(e,t)=>{const n=Array.from(new TextEncoder().encode(t));return e.writeVec(n,(i,s)=>i.write8(s))},e=>{let t=e.readVec(n=>n.read8());return new TextDecoder().decode(new Uint8Array(t))}),nn.registerType("unsafe_u64",(e,t)=>e.write64(t),e=>Number.parseInt(e.read64(),10));var on=Object.defineProperty,js=Object.getOwnPropertyDescriptor,Ns=Object.getOwnPropertyNames,$s=Object.prototype.hasOwnProperty,Cs=(e,t)=>{for(var n in t)on(e,n,{get:t[n],enumerable:!0})},Rs=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Ns(t))!$s.call(e,s)&&s!==n&&on(e,s,{get:()=>t[s],enumerable:!(i=js(t,s))||i.enumerable});return e},Ls=e=>Rs(on({},"__esModule",{value:!0}),e),pi={};Cs(pi,{SUI_ADDRESS_LENGTH:()=>sn,isValidSuiAddress:()=>xi,isValidSuiObjectId:()=>Ds,isValidTransactionDigest:()=>ks,normalizeStructTag:()=>wi,normalizeSuiAddress:()=>an,normalizeSuiObjectId:()=>Ks,parseStructTag:()=>fn});var Ir=Ls(pi),gi=vt;const Ms=32;function ks(e){try{return(0,gi.fromB58)(e).length===Ms}catch{return!1}}const sn=32;function xi(e){return Gs(e)&&Vs(e)===sn}function Ds(e){return xi(e)}function Hs(e){return e.includes("::")?fn(e):e}function fn(e){const[t,n]=e.split("::"),i=e.slice(t.length+n.length+4),s=i.includes("<")?i.slice(0,i.indexOf("<")):i,h=i.includes("<")?(0,gi.splitGenericParameters)(i.slice(i.indexOf("<")+1,i.lastIndexOf(">"))).map(u=>Hs(u.trim())):[];return{address:an(t),module:n,name:s,typeParams:h}}function wi(e){const{address:t,module:n,name:i,typeParams:s}=typeof e=="string"?fn(e):e,h=s.length>0?`<${s.map(u=>typeof u=="string"?u:wi(u)).join(",")}>`:"";return`${t}::${n}::${i}${h}`}function an(e,t=!1){let n=e.toLowerCase();return!t&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(sn*2,"0")}`}function Ks(e,t=!1){return an(e,t)}function Gs(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function Vs(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}var cn=Object.defineProperty,qs=Object.getOwnPropertyDescriptor,zs=Object.getOwnPropertyNames,Ys=Object.prototype.hasOwnProperty,Ws=(e,t)=>{for(var n in t)cn(e,n,{get:t[n],enumerable:!0})},Zs=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of zs(t))!Ys.call(e,s)&&s!==n&&cn(e,s,{get:()=>t[s],enumerable:!(i=qs(t,s))||i.enumerable});return e},Fs=e=>Zs(cn({},"__esModule",{value:!0}),e),_i={};Ws(_i,{TypeTagSerializer:()=>Jt});var Xs=Fs(_i),Js=vt,Qs=Ir;const ef=/^vector<(.+)>$/,tf=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class Jt{static parseFromStr(t,n=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};const i=t.match(ef);if(i)return{vector:Jt.parseFromStr(i[1],n)};const s=t.match(tf);if(s)return{struct:{address:n?(0,Qs.normalizeSuiAddress)(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:Jt.parseStructTypeArgs(s[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,n=!1){return(0,Js.splitGenericParameters)(t).map(i=>Jt.parseFromStr(i,n))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${Jt.tagToString(t.vector)}>`;if("struct"in t){const n=t.struct,i=n.typeParams.map(Jt.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${i?`<${i}>`:""}`}throw new Error("Invalid TypeTag")}}var un=Object.defineProperty,rf=Object.getOwnPropertyDescriptor,nf=Object.getOwnPropertyNames,of=Object.prototype.hasOwnProperty,sf=(e,t)=>{for(var n in t)un(e,n,{get:t[n],enumerable:!0})},ff=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of nf(t))!of.call(e,s)&&s!==n&&un(e,s,{get:()=>t[s],enumerable:!(i=rf(t,s))||i.enumerable});return e},af=e=>ff(un({},"__esModule",{value:!0}),e),vi={};sf(vi,{ARGUMENT:()=>It,ARGUMENT_INNER:()=>ln,CALL_ARG:()=>Bi,COMPRESSED_SIGNATURE:()=>bn,ENUM_KIND:()=>jr,MULTISIG:()=>Ti,MULTISIG_PK_MAP:()=>gn,MULTISIG_PUBLIC_KEY:()=>pn,OBJECT_ARG:()=>lf,OPTION:()=>Si,PROGRAMMABLE_CALL:()=>xn,PROGRAMMABLE_CALL_INNER:()=>Ur,PROGRAMMABLE_TX_BLOCK:()=>Ai,PUBLIC_KEY:()=>yn,TRANSACTION:()=>Oi,TRANSACTION_INNER:()=>dn,TYPE_TAG:()=>hn,VECTOR:()=>ut,builder:()=>kt});var mi=af(vi),lt=vt,cf=rn,Ei=Xs,uf=Ir;const ln="Argument",ut="vector",Si="Option",Bi="CallArg",hn="TypeTag",lf="ObjectArg",Ai="ProgrammableTransaction",Ur="ProgrammableMoveCall",dn="Transaction",bn="CompressedSignature",yn="PublicKey",pn="MultiSigPublicKey",gn="MultiSigPkMap",Ti="MultiSig",jr="EnumKind",Oi=[jr,dn],It=[jr,ln],xn="SimpleProgrammableMoveCall",kt=new lt.BCS(cf.bcs);wn(kt,"FixedArray[64]",64),wn(kt,"FixedArray[33]",33),wn(kt,"FixedArray[32]",32),kt.registerStructType(Ai,{inputs:[ut,Bi],transactions:[ut,Oi]}).registerEnumType(ln,{GasCoin:null,Input:{index:lt.BCS.U16},Result:{index:lt.BCS.U16},NestedResult:{index:lt.BCS.U16,resultIndex:lt.BCS.U16}}).registerStructType(Ur,{package:lt.BCS.ADDRESS,module:lt.BCS.STRING,function:lt.BCS.STRING,type_arguments:[ut,hn],arguments:[ut,It]}).registerEnumType(dn,{MoveCall:xn,TransferObjects:{objects:[ut,It],address:It},SplitCoins:{coin:It,amounts:[ut,It]},MergeCoins:{destination:It,sources:[ut,It]},Publish:{modules:[ut,[ut,lt.BCS.U8]],dependencies:[ut,lt.BCS.ADDRESS]},MakeMoveVec:{type:[Si,hn],objects:[ut,It]},Upgrade:{modules:[ut,[ut,lt.BCS.U8]],dependencies:[ut,lt.BCS.ADDRESS],packageId:lt.BCS.ADDRESS,ticket:It}}).registerEnumType(bn,{ED25519:["FixedArray[64]","u8"],Secp256k1:["FixedArray[64]","u8"],Secp256r1:["FixedArray[64]","u8"]}).registerEnumType(yn,{ED25519:["FixedArray[32]","u8"],Secp256k1:["FixedArray[33]","u8"],Secp256r1:["FixedArray[33]","u8"]}).registerStructType(gn,{pubKey:yn,weight:lt.BCS.U8}).registerStructType(pn,{pk_map:[ut,gn],threshold:lt.BCS.U16}).registerStructType(Ti,{sigs:[ut,bn],bitmap:lt.BCS.U16,multisig_pk:pn}),kt.registerType([jr,"T"],function(t,n,i,s){const u={[n.kind]:n},[b]=i;return this.getTypeInterface(b)._encodeRaw.call(this,t,u,i,s)},function(t,n,i){const[s]=n,h=this.getTypeInterface(s)._decodeRaw.call(this,t,n,i),u=Object.keys(h)[0];return{kind:u,...h[u]}},e=>{if(typeof e!="object"&&!("kind"in e))throw new Error(`EnumKind: Missing property "kind" in the input ${JSON.stringify(e)}`);return!0}),kt.registerType(xn,function(t,n,i,s){const[h,u,b]=n.target.split("::"),l=n.typeArguments.map(p=>Ei.TypeTagSerializer.parseFromStr(p,!0));return this.getTypeInterface(Ur)._encodeRaw.call(this,t,{package:(0,uf.normalizeSuiAddress)(h),module:u,function:b,type_arguments:l,arguments:n.arguments},i,s)},function(t,n,i){let s=kt.getTypeInterface(Ur)._decodeRaw.call(this,t,n,i);return{target:[s.package,s.module,s.function].join("::"),arguments:s.arguments,typeArguments:s.type_arguments.map(Ei.TypeTagSerializer.tagToString)}},e=>e.target.split("::").length===3);function wn(e,t,n){e.registerType(t,function(s,h,u,b){if(h.length!==n)throw new Error(`Expected fixed array of length ${n}, got ${h.length}`);if(u.length!==1)throw new Error(`Expected one type parameter in a fixed array, got ${u.length}`);let[l]=typeof u[0]=="string"?[u[0],[]]:u[0];for(let p of h)this.getTypeInterface(l)._encodeRaw.call(this,s,p,u,b);return s},function(s,h,u){if(h.length!==1)throw new Error(`Expected one type parameter in a fixed array, got ${h.length}`);let b=[],[l]=typeof h[0]=="string"?[h[0],[]]:h[0];for(let p=0;p<n;p++)b.push(this.getTypeInterface(l)._decodeRaw.call(this,s,h,u));return b})}var _n=Object.defineProperty,hf=Object.getOwnPropertyDescriptor,df=Object.getOwnPropertyNames,bf=Object.prototype.hasOwnProperty,yf=(e,t)=>{for(var n in t)_n(e,n,{get:t[n],enumerable:!0})},pf=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of df(t))!bf.call(e,s)&&s!==n&&_n(e,s,{get:()=>t[s],enumerable:!(i=hf(t,s))||i.enumerable});return e},gf=e=>pf(_n({},"__esModule",{value:!0}),e),Pi={};yf(Pi,{SIGNATURE_FLAG_TO_SCHEME:()=>ji,SIGNATURE_SCHEME_TO_FLAG:()=>Ui,SIGNATURE_SCHEME_TO_SIZE:()=>vn,parseSerializedSignature:()=>_f,toSerializedSignature:()=>wf});var nr=gf(Pi),Ii=vt,xf=mi;const Ui={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,Zk:5},vn={ED25519:32,Secp256k1:33,Secp256r1:33},ji={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"Zk"};function wf({signature:e,signatureScheme:t,pubKey:n,publicKey:i=n}){if(!i)throw new Error("`publicKey` is required");const s=i.toBytes(),h=new Uint8Array(1+e.length+s.length);return h.set([Ui[t]]),h.set(e,1),h.set(s,1+e.length),(0,Ii.toB64)(h)}function _f(e){const t=(0,Ii.fromB64)(e),n=ji[t[0]];if(n==="MultiSig"){const u=xf.builder.de("MultiSig",t.slice(1));return{serializedSignature:e,signatureScheme:n,multisig:u,bytes:t}}if(n==="Zk")throw new Error("Unable to parse a zk signature. (not implemented yet)");if(!(n in vn))throw new Error("Unsupported signature scheme");const i=vn[n],s=t.slice(1,t.length-i),h=t.slice(1+s.length);return{serializedSignature:e,signatureScheme:n,signature:s,publicKey:h,bytes:t}}var pt={},ot={};Object.defineProperty(ot,"__esModule",{value:!0}),ot.output=ot.exists=ot.hash=ot.bytes=ot.bool=ot.number=void 0;function Nr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}ot.number=Nr;function Ni(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}ot.bool=Ni;function mn(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}ot.bytes=mn;function $i(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Nr(e.outputLen),Nr(e.blockLen)}ot.hash=$i;function Ci(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}ot.exists=Ci;function Ri(e,t){mn(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}ot.output=Ri;const vf={number:Nr,bool:Ni,bytes:mn,hash:$i,exists:Ci,output:Ri};ot.default=vf;var ir={},En={},xt={},$r={};Object.defineProperty($r,"__esModule",{value:!0}),$r.crypto=void 0,$r.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=$r,n=S=>S instanceof Uint8Array,i=S=>new Uint8Array(S.buffer,S.byteOffset,S.byteLength);e.u8=i;const s=S=>new Uint32Array(S.buffer,S.byteOffset,Math.floor(S.byteLength/4));e.u32=s;const h=S=>new DataView(S.buffer,S.byteOffset,S.byteLength);e.createView=h;const u=(S,j)=>S<<32-j|S>>>j;if(e.rotr=u,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const b=Array.from({length:256},(S,j)=>j.toString(16).padStart(2,"0"));function l(S){if(!n(S))throw new Error("Uint8Array expected");let j="";for(let W=0;W<S.length;W++)j+=b[S[W]];return j}e.bytesToHex=l;function p(S){if(typeof S!="string")throw new Error("hex string expected, got "+typeof S);const j=S.length;if(j%2)throw new Error("padded hex string expected, got unpadded hex of length "+j);const W=new Uint8Array(j/2);for(let X=0;X<W.length;X++){const H=X*2,g=S.slice(H,H+2),x=Number.parseInt(g,16);if(Number.isNaN(x)||x<0)throw new Error("Invalid byte sequence");W[X]=x}return W}e.hexToBytes=p;const B=async()=>{};e.nextTick=B;async function w(S,j,W){let X=Date.now();for(let H=0;H<S;H++){W(H);const g=Date.now()-X;g>=0&&g<j||(await(0,e.nextTick)(),X+=g)}}e.asyncLoop=w;function O(S){if(typeof S!="string")throw new Error(`utf8ToBytes expected string, got ${typeof S}`);return new Uint8Array(new TextEncoder().encode(S))}e.utf8ToBytes=O;function U(S){if(typeof S=="string"&&(S=O(S)),!n(S))throw new Error(`expected Uint8Array, got ${typeof S}`);return S}e.toBytes=U;function $(...S){const j=new Uint8Array(S.reduce((X,H)=>X+H.length,0));let W=0;return S.forEach(X=>{if(!n(X))throw new Error("Uint8Array expected");j.set(X,W),W+=X.length}),j}e.concatBytes=$;class D{clone(){return this._cloneInto()}}e.Hash=D;const Z=S=>Object.prototype.toString.call(S)==="[object Object]"&&S.constructor===Object;function pe(S,j){if(j!==void 0&&(typeof j!="object"||!Z(j)))throw new Error("Options should be object or undefined");return Object.assign(S,j)}e.checkOpts=pe;function v(S){const j=X=>S().update(U(X)).digest(),W=S();return j.outputLen=W.outputLen,j.blockLen=W.blockLen,j.create=()=>S(),j}e.wrapConstructor=v;function m(S){const j=(X,H)=>S(H).update(U(X)).digest(),W=S({});return j.outputLen=W.outputLen,j.blockLen=W.blockLen,j.create=X=>S(X),j}e.wrapConstructorWithOpts=m;function d(S){const j=(X,H)=>S(H).update(U(X)).digest(),W=S({});return j.outputLen=W.outputLen,j.blockLen=W.blockLen,j.create=X=>S(X),j}e.wrapXOFConstructorWithOpts=d;function V(S=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(S));throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=V}(xt),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;const t=ot,n=xt;class i extends n.Hash{constructor(u,b){super(),this.finished=!1,this.destroyed=!1,t.default.hash(u);const l=(0,n.toBytes)(b);if(this.iHash=u.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const p=this.blockLen,B=new Uint8Array(p);B.set(l.length>p?u.create().update(l).digest():l);for(let w=0;w<B.length;w++)B[w]^=54;this.iHash.update(B),this.oHash=u.create();for(let w=0;w<B.length;w++)B[w]^=106;this.oHash.update(B),B.fill(0)}update(u){return t.default.exists(this),this.iHash.update(u),this}digestInto(u){t.default.exists(this),t.default.bytes(u,this.outputLen),this.finished=!0,this.iHash.digestInto(u),this.oHash.update(u),this.oHash.digestInto(u),this.destroy()}digest(){const u=new Uint8Array(this.oHash.outputLen);return this.digestInto(u),u}_cloneInto(u){u||(u=Object.create(Object.getPrototypeOf(this),{}));const{oHash:b,iHash:l,finished:p,destroyed:B,blockLen:w,outputLen:O}=this;return u=u,u.finished=p,u.destroyed=B,u.blockLen=w,u.outputLen=O,u.oHash=b._cloneInto(u.oHash),u.iHash=l._cloneInto(u.iHash),u}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.HMAC=i;const s=(h,u,b)=>new i(h,u).update(b).digest();e.hmac=s,e.hmac.create=(h,u)=>new i(h,u)}(En),Object.defineProperty(ir,"__esModule",{value:!0}),ir.pbkdf2Async=ir.pbkdf2=void 0;const Cr=ot,mf=En,or=xt;function Li(e,t,n,i){Cr.default.hash(e);const s=(0,or.checkOpts)({dkLen:32,asyncTick:10},i),{c:h,dkLen:u,asyncTick:b}=s;if(Cr.default.number(h),Cr.default.number(u),Cr.default.number(b),h<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=(0,or.toBytes)(t),p=(0,or.toBytes)(n),B=new Uint8Array(u),w=mf.hmac.create(e,l),O=w._cloneInto().update(p);return{c:h,dkLen:u,asyncTick:b,DK:B,PRF:w,PRFSalt:O}}function Mi(e,t,n,i,s){return e.destroy(),t.destroy(),i&&i.destroy(),s.fill(0),n}function Ef(e,t,n,i){const{c:s,dkLen:h,DK:u,PRF:b,PRFSalt:l}=Li(e,t,n,i);let p;const B=new Uint8Array(4),w=(0,or.createView)(B),O=new Uint8Array(b.outputLen);for(let U=1,$=0;$<h;U++,$+=b.outputLen){const D=u.subarray($,$+b.outputLen);w.setInt32(0,U,!1),(p=l._cloneInto(p)).update(B).digestInto(O),D.set(O.subarray(0,D.length));for(let Z=1;Z<s;Z++){b._cloneInto(p).update(O).digestInto(O);for(let pe=0;pe<D.length;pe++)D[pe]^=O[pe]}}return Mi(b,l,u,p,O)}ir.pbkdf2=Ef;async function Sf(e,t,n,i){const{c:s,dkLen:h,asyncTick:u,DK:b,PRF:l,PRFSalt:p}=Li(e,t,n,i);let B;const w=new Uint8Array(4),O=(0,or.createView)(w),U=new Uint8Array(l.outputLen);for(let $=1,D=0;D<h;$++,D+=l.outputLen){const Z=b.subarray(D,D+l.outputLen);O.setInt32(0,$,!1),(B=p._cloneInto(B)).update(w).digestInto(U),Z.set(U.subarray(0,Z.length)),await(0,or.asyncLoop)(s-1,u,pe=>{l._cloneInto(B).update(U).digestInto(U);for(let v=0;v<Z.length;v++)Z[v]^=U[v]})}return Mi(l,p,b,B,U)}ir.pbkdf2Async=Sf;var Ut={},yr={};Object.defineProperty(yr,"__esModule",{value:!0}),yr.SHA2=void 0;const Sn=ot,pr=xt;function Bf(e,t,n,i){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,i);const s=BigInt(32),h=BigInt(4294967295),u=Number(n>>s&h),b=Number(n&h),l=i?4:0,p=i?0:4;e.setUint32(t+l,u,i),e.setUint32(t+p,b,i)}class Af extends pr.Hash{constructor(t,n,i,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=i,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,pr.createView)(this.buffer)}update(t){Sn.default.exists(this);const{view:n,buffer:i,blockLen:s}=this;t=(0,pr.toBytes)(t);const h=t.length;for(let u=0;u<h;){const b=Math.min(s-this.pos,h-u);if(b===s){const l=(0,pr.createView)(t);for(;s<=h-u;u+=s)this.process(l,u);continue}i.set(t.subarray(u,u+b),this.pos),this.pos+=b,u+=b,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Sn.default.exists(this),Sn.default.output(t,this),this.finished=!0;const{buffer:n,view:i,blockLen:s,isLE:h}=this;let{pos:u}=this;n[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>s-u&&(this.process(i,0),u=0);for(let w=u;w<s;w++)n[w]=0;Bf(i,s-8,BigInt(this.length*8),h),this.process(i,0);const b=(0,pr.createView)(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=l/4,B=this.get();if(p>B.length)throw new Error("_sha2: outputLen bigger than state");for(let w=0;w<p;w++)b.setUint32(4*w,B[w],h)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const i=t.slice(0,n);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:i,length:s,finished:h,destroyed:u,pos:b}=this;return t.length=s,t.pos=b,t.finished=h,t.destroyed=u,s%n&&t.buffer.set(i),t}}yr.SHA2=Af,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.sha224=Ut.sha256=void 0;const Tf=yr,mt=xt,Of=(e,t,n)=>e&t^~e&n,Pf=(e,t,n)=>e&t^e&n^t&n,If=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Dt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ht=new Uint32Array(64);class ki extends Tf.SHA2{constructor(){super(64,32,8,!1),this.A=Dt[0]|0,this.B=Dt[1]|0,this.C=Dt[2]|0,this.D=Dt[3]|0,this.E=Dt[4]|0,this.F=Dt[5]|0,this.G=Dt[6]|0,this.H=Dt[7]|0}get(){const{A:t,B:n,C:i,D:s,E:h,F:u,G:b,H:l}=this;return[t,n,i,s,h,u,b,l]}set(t,n,i,s,h,u,b,l){this.A=t|0,this.B=n|0,this.C=i|0,this.D=s|0,this.E=h|0,this.F=u|0,this.G=b|0,this.H=l|0}process(t,n){for(let w=0;w<16;w++,n+=4)Ht[w]=t.getUint32(n,!1);for(let w=16;w<64;w++){const O=Ht[w-15],U=Ht[w-2],$=(0,mt.rotr)(O,7)^(0,mt.rotr)(O,18)^O>>>3,D=(0,mt.rotr)(U,17)^(0,mt.rotr)(U,19)^U>>>10;Ht[w]=D+Ht[w-7]+$+Ht[w-16]|0}let{A:i,B:s,C:h,D:u,E:b,F:l,G:p,H:B}=this;for(let w=0;w<64;w++){const O=(0,mt.rotr)(b,6)^(0,mt.rotr)(b,11)^(0,mt.rotr)(b,25),U=B+O+Of(b,l,p)+If[w]+Ht[w]|0,D=((0,mt.rotr)(i,2)^(0,mt.rotr)(i,13)^(0,mt.rotr)(i,22))+Pf(i,s,h)|0;B=p,p=l,l=b,b=u+U|0,u=h,h=s,s=i,i=U+D|0}i=i+this.A|0,s=s+this.B|0,h=h+this.C|0,u=u+this.D|0,b=b+this.E|0,l=l+this.F|0,p=p+this.G|0,B=B+this.H|0,this.set(i,s,h,u,b,l,p,B)}roundClean(){Ht.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Uf extends ki{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}Ut.sha256=(0,mt.wrapConstructor)(()=>new ki),Ut.sha224=(0,mt.wrapConstructor)(()=>new Uf);var Et={},Bn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.add=e.toBig=e.split=e.fromBig=void 0;const t=BigInt(2**32-1),n=BigInt(32);function i(H,g=!1){return g?{h:Number(H&t),l:Number(H>>n&t)}:{h:Number(H>>n&t)|0,l:Number(H&t)|0}}e.fromBig=i;function s(H,g=!1){let x=new Uint32Array(H.length),A=new Uint32Array(H.length);for(let Q=0;Q<H.length;Q++){const{h:J,l:K}=i(H[Q],g);[x[Q],A[Q]]=[J,K]}return[x,A]}e.split=s;const h=(H,g)=>BigInt(H>>>0)<<n|BigInt(g>>>0);e.toBig=h;const u=(H,g,x)=>H>>>x,b=(H,g,x)=>H<<32-x|g>>>x,l=(H,g,x)=>H>>>x|g<<32-x,p=(H,g,x)=>H<<32-x|g>>>x,B=(H,g,x)=>H<<64-x|g>>>x-32,w=(H,g,x)=>H>>>x-32|g<<64-x,O=(H,g)=>g,U=(H,g)=>H,$=(H,g,x)=>H<<x|g>>>32-x,D=(H,g,x)=>g<<x|H>>>32-x,Z=(H,g,x)=>g<<x-32|H>>>64-x,pe=(H,g,x)=>H<<x-32|g>>>64-x;function v(H,g,x,A){const Q=(g>>>0)+(A>>>0);return{h:H+x+(Q/2**32|0)|0,l:Q|0}}e.add=v;const m=(H,g,x)=>(H>>>0)+(g>>>0)+(x>>>0),d=(H,g,x,A)=>g+x+A+(H/2**32|0)|0,V=(H,g,x,A)=>(H>>>0)+(g>>>0)+(x>>>0)+(A>>>0),S=(H,g,x,A,Q)=>g+x+A+Q+(H/2**32|0)|0,j=(H,g,x,A,Q)=>(H>>>0)+(g>>>0)+(x>>>0)+(A>>>0)+(Q>>>0),W=(H,g,x,A,Q,J)=>g+x+A+Q+J+(H/2**32|0)|0,X={fromBig:i,split:s,toBig:e.toBig,shrSH:u,shrSL:b,rotrSH:l,rotrSL:p,rotrBH:B,rotrBL:w,rotr32H:O,rotr32L:U,rotlSH:$,rotlSL:D,rotlBH:Z,rotlBL:pe,add:v,add3L:m,add3H:d,add4L:V,add4H:S,add5H:W,add5L:j};e.default=X})(Bn),Object.defineProperty(Et,"__esModule",{value:!0}),Et.sha384=Et.sha512_256=Et.sha512_224=Et.sha512=Et.SHA512=void 0;const jf=yr,je=Bn,Rr=xt,[Nf,$f]=je.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Kt=new Uint32Array(80),Gt=new Uint32Array(80);class gr extends jf.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:i,Bl:s,Ch:h,Cl:u,Dh:b,Dl:l,Eh:p,El:B,Fh:w,Fl:O,Gh:U,Gl:$,Hh:D,Hl:Z}=this;return[t,n,i,s,h,u,b,l,p,B,w,O,U,$,D,Z]}set(t,n,i,s,h,u,b,l,p,B,w,O,U,$,D,Z){this.Ah=t|0,this.Al=n|0,this.Bh=i|0,this.Bl=s|0,this.Ch=h|0,this.Cl=u|0,this.Dh=b|0,this.Dl=l|0,this.Eh=p|0,this.El=B|0,this.Fh=w|0,this.Fl=O|0,this.Gh=U|0,this.Gl=$|0,this.Hh=D|0,this.Hl=Z|0}process(t,n){for(let m=0;m<16;m++,n+=4)Kt[m]=t.getUint32(n),Gt[m]=t.getUint32(n+=4);for(let m=16;m<80;m++){const d=Kt[m-15]|0,V=Gt[m-15]|0,S=je.default.rotrSH(d,V,1)^je.default.rotrSH(d,V,8)^je.default.shrSH(d,V,7),j=je.default.rotrSL(d,V,1)^je.default.rotrSL(d,V,8)^je.default.shrSL(d,V,7),W=Kt[m-2]|0,X=Gt[m-2]|0,H=je.default.rotrSH(W,X,19)^je.default.rotrBH(W,X,61)^je.default.shrSH(W,X,6),g=je.default.rotrSL(W,X,19)^je.default.rotrBL(W,X,61)^je.default.shrSL(W,X,6),x=je.default.add4L(j,g,Gt[m-7],Gt[m-16]),A=je.default.add4H(x,S,H,Kt[m-7],Kt[m-16]);Kt[m]=A|0,Gt[m]=x|0}let{Ah:i,Al:s,Bh:h,Bl:u,Ch:b,Cl:l,Dh:p,Dl:B,Eh:w,El:O,Fh:U,Fl:$,Gh:D,Gl:Z,Hh:pe,Hl:v}=this;for(let m=0;m<80;m++){const d=je.default.rotrSH(w,O,14)^je.default.rotrSH(w,O,18)^je.default.rotrBH(w,O,41),V=je.default.rotrSL(w,O,14)^je.default.rotrSL(w,O,18)^je.default.rotrBL(w,O,41),S=w&U^~w&D,j=O&$^~O&Z,W=je.default.add5L(v,V,j,$f[m],Gt[m]),X=je.default.add5H(W,pe,d,S,Nf[m],Kt[m]),H=W|0,g=je.default.rotrSH(i,s,28)^je.default.rotrBH(i,s,34)^je.default.rotrBH(i,s,39),x=je.default.rotrSL(i,s,28)^je.default.rotrBL(i,s,34)^je.default.rotrBL(i,s,39),A=i&h^i&b^h&b,Q=s&u^s&l^u&l;pe=D|0,v=Z|0,D=U|0,Z=$|0,U=w|0,$=O|0,{h:w,l:O}=je.default.add(p|0,B|0,X|0,H|0),p=b|0,B=l|0,b=h|0,l=u|0,h=i|0,u=s|0;const J=je.default.add3L(H,x,Q);i=je.default.add3H(J,X,g,A),s=J|0}({h:i,l:s}=je.default.add(this.Ah|0,this.Al|0,i|0,s|0)),{h,l:u}=je.default.add(this.Bh|0,this.Bl|0,h|0,u|0),{h:b,l}=je.default.add(this.Ch|0,this.Cl|0,b|0,l|0),{h:p,l:B}=je.default.add(this.Dh|0,this.Dl|0,p|0,B|0),{h:w,l:O}=je.default.add(this.Eh|0,this.El|0,w|0,O|0),{h:U,l:$}=je.default.add(this.Fh|0,this.Fl|0,U|0,$|0),{h:D,l:Z}=je.default.add(this.Gh|0,this.Gl|0,D|0,Z|0),{h:pe,l:v}=je.default.add(this.Hh|0,this.Hl|0,pe|0,v|0),this.set(i,s,h,u,b,l,p,B,w,O,U,$,D,Z,pe,v)}roundClean(){Kt.fill(0),Gt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Et.SHA512=gr;class Cf extends gr{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Rf extends gr{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Lf extends gr{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}Et.sha512=(0,Rr.wrapConstructor)(()=>new gr),Et.sha512_224=(0,Rr.wrapConstructor)(()=>new Cf),Et.sha512_256=(0,Rr.wrapConstructor)(()=>new Rf),Et.sha384=(0,Rr.wrapConstructor)(()=>new Lf);var Di={};(function(e){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0;function t(g){if(!Number.isSafeInteger(g))throw new Error(`Wrong integer: ${g}`)}e.assertNumber=t;function n(...g){const x=(J,K)=>N=>J(K(N)),A=Array.from(g).reverse().reduce((J,K)=>J?x(J,K.encode):K.encode,void 0),Q=g.reduce((J,K)=>J?x(J,K.decode):K.decode,void 0);return{encode:A,decode:Q}}function i(g){return{encode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return x.map(A=>{if(t(A),A<0||A>=g.length)throw new Error(`Digit index outside alphabet: ${A} (alphabet: ${g.length})`);return g[A]})},decode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="string")throw new Error("alphabet.decode input should be array of strings");return x.map(A=>{if(typeof A!="string")throw new Error(`alphabet.decode: not string element=${A}`);const Q=g.indexOf(A);if(Q===-1)throw new Error(`Unknown letter: "${A}". Allowed: ${g}`);return Q})}}}function s(g=""){if(typeof g!="string")throw new Error("join separator should be string");return{encode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="string")throw new Error("join.encode input should be array of strings");for(let A of x)if(typeof A!="string")throw new Error(`join.encode: non-string input=${A}`);return x.join(g)},decode:x=>{if(typeof x!="string")throw new Error("join.decode input should be string");return x.split(g)}}}function h(g,x="="){if(t(g),typeof x!="string")throw new Error("padding chr should be string");return{encode(A){if(!Array.isArray(A)||A.length&&typeof A[0]!="string")throw new Error("padding.encode input should be array of strings");for(let Q of A)if(typeof Q!="string")throw new Error(`padding.encode: non-string input=${Q}`);for(;A.length*g%8;)A.push(x);return A},decode(A){if(!Array.isArray(A)||A.length&&typeof A[0]!="string")throw new Error("padding.encode input should be array of strings");for(let J of A)if(typeof J!="string")throw new Error(`padding.decode: non-string input=${J}`);let Q=A.length;if(Q*g%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;Q>0&&A[Q-1]===x;Q--)if(!((Q-1)*g%8))throw new Error("Invalid padding: string has too much padding");return A.slice(0,Q)}}}function u(g){if(typeof g!="function")throw new Error("normalize fn should be function");return{encode:x=>x,decode:x=>g(x)}}function b(g,x,A){if(x<2)throw new Error(`convertRadix: wrong from=${x}, base cannot be less than 2`);if(A<2)throw new Error(`convertRadix: wrong to=${A}, base cannot be less than 2`);if(!Array.isArray(g))throw new Error("convertRadix: data should be array");if(!g.length)return[];let Q=0;const J=[],K=Array.from(g);for(K.forEach(N=>{if(t(N),N<0||N>=x)throw new Error(`Wrong integer: ${N}`)});;){let N=0,F=!0;for(let T=Q;T<K.length;T++){const C=K[T],k=x*N+C;if(!Number.isSafeInteger(k)||x*N/x!==N||k-C!==x*N)throw new Error("convertRadix: carry overflow");if(N=k%A,K[T]=Math.floor(k/A),!Number.isSafeInteger(K[T])||K[T]*A+N!==k)throw new Error("convertRadix: carry overflow");if(F)K[T]?F=!1:Q=T;else continue}if(J.push(N),F)break}for(let N=0;N<g.length-1&&g[N]===0;N++)J.push(0);return J.reverse()}const l=(g,x)=>x?l(x,g%x):g,p=(g,x)=>g+(x-l(g,x));function B(g,x,A,Q){if(!Array.isArray(g))throw new Error("convertRadix2: data should be array");if(x<=0||x>32)throw new Error(`convertRadix2: wrong from=${x}`);if(A<=0||A>32)throw new Error(`convertRadix2: wrong to=${A}`);if(p(x,A)>32)throw new Error(`convertRadix2: carry overflow from=${x} to=${A} carryBits=${p(x,A)}`);let J=0,K=0;const N=2**A-1,F=[];for(const T of g){if(t(T),T>=2**x)throw new Error(`convertRadix2: invalid data word=${T} from=${x}`);if(J=J<<x|T,K+x>32)throw new Error(`convertRadix2: carry overflow pos=${K} from=${x}`);for(K+=x;K>=A;K-=A)F.push((J>>K-A&N)>>>0);J&=2**K-1}if(J=J<<A-K&N,!Q&&K>=x)throw new Error("Excess padding");if(!Q&&J)throw new Error(`Non-zero padding: ${J}`);return Q&&K>0&&F.push(J>>>0),F}function w(g){return t(g),{encode:x=>{if(!(x instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return b(Array.from(x),2**8,g)},decode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(b(x,g,2**8))}}}function O(g,x=!1){if(t(g),g<=0||g>32)throw new Error("radix2: bits should be in (0..32]");if(p(8,g)>32||p(g,8)>32)throw new Error("radix2: carry overflow");return{encode:A=>{if(!(A instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return B(Array.from(A),8,g,!x)},decode:A=>{if(!Array.isArray(A)||A.length&&typeof A[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(B(A,g,8,x))}}}function U(g){if(typeof g!="function")throw new Error("unsafeWrapper fn should be function");return function(...x){try{return g.apply(null,x)}catch{}}}function $(g,x){if(t(g),typeof x!="function")throw new Error("checksum fn should be function");return{encode(A){if(!(A instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const Q=x(A).slice(0,g),J=new Uint8Array(A.length+g);return J.set(A),J.set(Q,A.length),J},decode(A){if(!(A instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const Q=A.slice(0,-g),J=x(Q).slice(0,g),K=A.slice(-g);for(let N=0;N<g;N++)if(J[N]!==K[N])throw new Error("Invalid checksum");return Q}}}e.utils={alphabet:i,chain:n,checksum:$,radix:w,radix2:O,join:s,padding:h},e.base16=n(O(4),i("0123456789ABCDEF"),s("")),e.base32=n(O(5),i("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),h(5),s("")),e.base32hex=n(O(5),i("0123456789ABCDEFGHIJKLMNOPQRSTUV"),h(5),s("")),e.base32crockford=n(O(5),i("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),s(""),u(g=>g.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=n(O(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),h(6),s("")),e.base64url=n(O(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),h(6),s(""));const D=g=>n(w(58),i(g),s(""));e.base58=D("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=D("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=D("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const Z=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(g){let x="";for(let A=0;A<g.length;A+=8){const Q=g.subarray(A,A+8);x+=e.base58.encode(Q).padStart(Z[Q.length],"1")}return x},decode(g){let x=[];for(let A=0;A<g.length;A+=11){const Q=g.slice(A,A+11),J=Z.indexOf(Q.length),K=e.base58.decode(Q);for(let N=0;N<K.length-J;N++)if(K[N]!==0)throw new Error("base58xmr: wrong padding");x=x.concat(Array.from(K.slice(K.length-J)))}return Uint8Array.from(x)}};const pe=g=>n($(4,x=>g(g(x))),e.base58);e.base58check=pe;const v=n(i("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),s("")),m=[996825010,642813549,513874426,1027748829,705979059];function d(g){const x=g>>25;let A=(g&33554431)<<5;for(let Q=0;Q<m.length;Q++)(x>>Q&1)===1&&(A^=m[Q]);return A}function V(g,x,A=1){const Q=g.length;let J=1;for(let K=0;K<Q;K++){const N=g.charCodeAt(K);if(N<33||N>126)throw new Error(`Invalid prefix (${g})`);J=d(J)^N>>5}J=d(J);for(let K=0;K<Q;K++)J=d(J)^g.charCodeAt(K)&31;for(let K of x)J=d(J)^K;for(let K=0;K<6;K++)J=d(J);return J^=A,v.encode(B([J%2**30],30,5,!1))}function S(g){const x=g==="bech32"?1:734539939,A=O(5),Q=A.decode,J=A.encode,K=U(Q);function N(k,re,ne=90){if(typeof k!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof k}`);if(!Array.isArray(re)||re.length&&typeof re[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof re}`);const ee=k.length+7+re.length;if(ne!==!1&&ee>ne)throw new TypeError(`Length ${ee} exceeds limit ${ne}`);return k=k.toLowerCase(),`${k}1${v.encode(re)}${V(k,re,x)}`}function F(k,re=90){if(typeof k!="string")throw new Error(`bech32.decode input should be string, not ${typeof k}`);if(k.length<8||re!==!1&&k.length>re)throw new TypeError(`Wrong string length: ${k.length} (${k}). Expected (8..${re})`);const ne=k.toLowerCase();if(k!==ne&&k!==k.toUpperCase())throw new Error("String must be lowercase or uppercase");k=ne;const ee=k.lastIndexOf("1");if(ee===0||ee===-1)throw new Error('Letter "1" must be present between prefix and data only');const q=k.slice(0,ee),fe=k.slice(ee+1);if(fe.length<6)throw new Error("Data must be at least 6 characters long");const Ke=v.decode(fe).slice(0,-6),_e=V(q,Ke,x);if(!fe.endsWith(_e))throw new Error(`Invalid checksum in ${k}: expected "${_e}"`);return{prefix:q,words:Ke}}const T=U(F);function C(k){const{prefix:re,words:ne}=F(k,!1);return{prefix:re,words:ne,bytes:Q(ne)}}return{encode:N,decode:F,decodeToBytes:C,decodeUnsafe:T,fromWords:Q,fromWordsUnsafe:K,toWords:J}}e.bech32=S("bech32"),e.bech32m=S("bech32m"),e.utf8={encode:g=>new TextDecoder().decode(g),decode:g=>new TextEncoder().encode(g)},e.hex=n(O(4),i("0123456789abcdef"),s(""),u(g=>{if(typeof g!="string"||g.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof g} with length ${g.length}`);return g.toLowerCase()}));const j={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},W=`Invalid encoding type. Available types: ${Object.keys(j).join(", ")}`,X=(g,x)=>{if(typeof g!="string"||!j.hasOwnProperty(g))throw new TypeError(W);if(!(x instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return j[g].encode(x)};e.bytesToString=X,e.str=e.bytesToString;const H=(g,x)=>{if(!j.hasOwnProperty(g))throw new TypeError(W);if(typeof x!="string")throw new TypeError("stringToBytes() expects string");return j[g].decode(x)};e.stringToBytes=H,e.bytes=e.stringToBytes})(Di),Object.defineProperty(pt,"__esModule",{value:!0}),pt.mnemonicToSeedSync=pt.mnemonicToSeed=pt.validateMnemonic=pt.entropyToMnemonic=pt.mnemonicToEntropy=pt.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const Hi=ot,Ki=ir,Mf=Ut,Gi=Et,kf=xt,Lr=Di,Df=e=>e[0]==="\u3042\u3044\u3053\u304F\u3057\u3093";function Vi(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function An(e){const t=Vi(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function qi(e){Hi.default.bytes(e,16,20,24,28,32)}function Hf(e,t=128){if(Hi.default.number(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return Wi((0,kf.randomBytes)(t/8),e)}pt.generateMnemonic=Hf;const Kf=e=>{const t=8-e.length/4;return new Uint8Array([(0,Mf.sha256)(e)[0]>>t<<t])};function zi(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(t=>{if(typeof t!="string")throw new Error(`Wordlist: non-string element: ${t}`)}),Lr.utils.chain(Lr.utils.checksum(1,Kf),Lr.utils.radix2(11,!0),Lr.utils.alphabet(e))}function Yi(e,t){const{words:n}=An(e),i=zi(t).decode(n);return qi(i),i}pt.mnemonicToEntropy=Yi;function Wi(e,t){return qi(e),zi(t).encode(e).join(Df(t)?"\u3000":" ")}pt.entropyToMnemonic=Wi;function Gf(e,t){try{Yi(e,t)}catch{return!1}return!0}pt.validateMnemonic=Gf;const Zi=e=>Vi(`mnemonic${e}`);function Vf(e,t=""){return(0,Ki.pbkdf2Async)(Gi.sha512,An(e).nfkd,Zi(t),{c:2048,dkLen:64})}pt.mnemonicToSeed=Vf;function qf(e,t=""){return(0,Ki.pbkdf2)(Gi.sha512,An(e).nfkd,Zi(t),{c:2048,dkLen:64})}pt.mnemonicToSeedSync=qf;var Tn=Object.defineProperty,zf=Object.getOwnPropertyDescriptor,Yf=Object.getOwnPropertyNames,Wf=Object.prototype.hasOwnProperty,Zf=(e,t)=>{for(var n in t)Tn(e,n,{get:t[n],enumerable:!0})},Ff=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Yf(t))!Wf.call(e,s)&&s!==n&&Tn(e,s,{get:()=>t[s],enumerable:!(i=zf(t,s))||i.enumerable});return e},Xf=e=>Ff(Tn({},"__esModule",{value:!0}),e),Fi={};Zf(Fi,{isValidBIP32Path:()=>ra,isValidHardenedPath:()=>ta,mnemonicToSeed:()=>Xi,mnemonicToSeedHex:()=>na});var Jf=Xf(Fi),Qf=vt,ea=pt;function ta(e){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}function ra(e){return!!new RegExp("^m\\/(54|74)'\\/784'\\/[0-9]+'\\/[0-9]+\\/[0-9]+$").test(e)}function Xi(e){return(0,ea.mnemonicToSeedSync)(e,"")}function na(e){return(0,Qf.toHEX)(Xi(e))}var On=Object.defineProperty,ia=Object.getOwnPropertyDescriptor,oa=Object.getOwnPropertyNames,sa=Object.prototype.hasOwnProperty,fa=(e,t)=>{for(var n in t)On(e,n,{get:t[n],enumerable:!0})},aa=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of oa(t))!sa.call(e,s)&&s!==n&&On(e,s,{get:()=>t[s],enumerable:!(i=ia(t,s))||i.enumerable});return e},ca=e=>aa(On({},"__esModule",{value:!0}),e),Ji={};fa(Ji,{AppId:()=>Qi,IntentScope:()=>to,IntentVersion:()=>eo,messageWithIntent:()=>la});var Pn=ca(Ji),Qi=(e=>(e[e.Sui=0]="Sui",e))(Qi||{}),eo=(e=>(e[e.V0=0]="V0",e))(eo||{}),to=(e=>(e[e.TransactionData=0]="TransactionData",e[e.TransactionEffects=1]="TransactionEffects",e[e.CheckpointSummary=2]="CheckpointSummary",e[e.PersonalMessage=3]="PersonalMessage",e))(to||{});function ua(e){return[e,0,0]}function la(e,t){const n=ua(e),i=new Uint8Array(n.length+t.length);return i.set(n),i.set(t,n.length),i}var sr={},fr={};Object.defineProperty(fr,"__esModule",{value:!0}),fr.BLAKE2=fr.SIGMA=void 0;const ar=ot,Mr=xt;fr.SIGMA=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class ha extends Mr.Hash{constructor(t,n,i={},s,h,u){if(super(),this.blockLen=t,this.outputLen=n,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,ar.default.number(t),ar.default.number(n),ar.default.number(s),n<0||n>s)throw new Error("outputLen bigger than keyLen");if(i.key!==void 0&&(i.key.length<1||i.key.length>s))throw new Error(`key must be up 1..${s} byte long or undefined`);if(i.salt!==void 0&&i.salt.length!==h)throw new Error(`salt must be ${h} byte long or undefined`);if(i.personalization!==void 0&&i.personalization.length!==u)throw new Error(`personalization must be ${u} byte long or undefined`);this.buffer32=(0,Mr.u32)(this.buffer=new Uint8Array(t))}update(t){ar.default.exists(this);const{blockLen:n,buffer:i,buffer32:s}=this;t=(0,Mr.toBytes)(t);const h=t.length,u=t.byteOffset,b=t.buffer;for(let l=0;l<h;){this.pos===n&&(this.compress(s,0,!1),this.pos=0);const p=Math.min(n-this.pos,h-l),B=u+l;if(p===n&&!(B%4)&&l+p<h){const w=new Uint32Array(b,B,Math.floor((h-l)/4));for(let O=0;l+n<h;O+=s.length,l+=n)this.length+=n,this.compress(w,O,!1);continue}i.set(t.subarray(l,l+p),this.pos),this.pos+=p,this.length+=p,l+=p}return this}digestInto(t){ar.default.exists(this),ar.default.output(t,this);const{pos:n,buffer32:i}=this;this.finished=!0,this.buffer.subarray(n).fill(0),this.compress(i,0,!0);const s=(0,Mr.u32)(t);this.get().forEach((h,u)=>s[u]=h)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const i=t.slice(0,n);return this.destroy(),i}_cloneInto(t){const{buffer:n,length:i,finished:s,destroyed:h,outputLen:u,pos:b}=this;return t||(t=new this.constructor({dkLen:u})),t.set(...this.get()),t.length=i,t.finished=s,t.destroyed=h,t.outputLen=u,t.buffer.set(n),t.pos=b,t}}fr.BLAKE2=ha,Object.defineProperty(sr,"__esModule",{value:!0}),sr.blake2b=void 0;const ro=fr,yt=Bn,cr=xt,st=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ie=new Uint32Array(32);function Vt(e,t,n,i,s,h){const u=s[h],b=s[h+1];let l=ie[2*e],p=ie[2*e+1],B=ie[2*t],w=ie[2*t+1],O=ie[2*n],U=ie[2*n+1],$=ie[2*i],D=ie[2*i+1],Z=yt.default.add3L(l,B,u);p=yt.default.add3H(Z,p,w,b),l=Z|0,{Dh:D,Dl:$}={Dh:D^p,Dl:$^l},{Dh:D,Dl:$}={Dh:yt.default.rotr32H(D,$),Dl:yt.default.rotr32L(D,$)},{h:U,l:O}=yt.default.add(U,O,D,$),{Bh:w,Bl:B}={Bh:w^U,Bl:B^O},{Bh:w,Bl:B}={Bh:yt.default.rotrSH(w,B,24),Bl:yt.default.rotrSL(w,B,24)},ie[2*e]=l,ie[2*e+1]=p,ie[2*t]=B,ie[2*t+1]=w,ie[2*n]=O,ie[2*n+1]=U,ie[2*i]=$,ie[2*i+1]=D}function qt(e,t,n,i,s,h){const u=s[h],b=s[h+1];let l=ie[2*e],p=ie[2*e+1],B=ie[2*t],w=ie[2*t+1],O=ie[2*n],U=ie[2*n+1],$=ie[2*i],D=ie[2*i+1],Z=yt.default.add3L(l,B,u);p=yt.default.add3H(Z,p,w,b),l=Z|0,{Dh:D,Dl:$}={Dh:D^p,Dl:$^l},{Dh:D,Dl:$}={Dh:yt.default.rotrSH(D,$,16),Dl:yt.default.rotrSL(D,$,16)},{h:U,l:O}=yt.default.add(U,O,D,$),{Bh:w,Bl:B}={Bh:w^U,Bl:B^O},{Bh:w,Bl:B}={Bh:yt.default.rotrBH(w,B,63),Bl:yt.default.rotrBL(w,B,63)},ie[2*e]=l,ie[2*e+1]=p,ie[2*t]=B,ie[2*t+1]=w,ie[2*n]=O,ie[2*n+1]=U,ie[2*i]=$,ie[2*i+1]=D}class da extends ro.BLAKE2{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=st[0]|0,this.v0h=st[1]|0,this.v1l=st[2]|0,this.v1h=st[3]|0,this.v2l=st[4]|0,this.v2h=st[5]|0,this.v3l=st[6]|0,this.v3h=st[7]|0,this.v4l=st[8]|0,this.v4h=st[9]|0,this.v5l=st[10]|0,this.v5h=st[11]|0,this.v6l=st[12]|0,this.v6h=st[13]|0,this.v7l=st[14]|0,this.v7h=st[15]|0;const n=t.key?t.key.length:0;if(this.v0l^=this.outputLen|n<<8|1<<16|1<<24,t.salt){const i=(0,cr.u32)((0,cr.toBytes)(t.salt));this.v4l^=i[0],this.v4h^=i[1],this.v5l^=i[2],this.v5h^=i[3]}if(t.personalization){const i=(0,cr.u32)((0,cr.toBytes)(t.personalization));this.v6l^=i[0],this.v6h^=i[1],this.v7l^=i[2],this.v7h^=i[3]}if(t.key){const i=new Uint8Array(this.blockLen);i.set((0,cr.toBytes)(t.key)),this.update(i)}}get(){let{v0l:t,v0h:n,v1l:i,v1h:s,v2l:h,v2h:u,v3l:b,v3h:l,v4l:p,v4h:B,v5l:w,v5h:O,v6l:U,v6h:$,v7l:D,v7h:Z}=this;return[t,n,i,s,h,u,b,l,p,B,w,O,U,$,D,Z]}set(t,n,i,s,h,u,b,l,p,B,w,O,U,$,D,Z){this.v0l=t|0,this.v0h=n|0,this.v1l=i|0,this.v1h=s|0,this.v2l=h|0,this.v2h=u|0,this.v3l=b|0,this.v3h=l|0,this.v4l=p|0,this.v4h=B|0,this.v5l=w|0,this.v5h=O|0,this.v6l=U|0,this.v6h=$|0,this.v7l=D|0,this.v7h=Z|0}compress(t,n,i){this.get().forEach((l,p)=>ie[p]=l),ie.set(st,16);let{h:s,l:h}=yt.default.fromBig(BigInt(this.length));ie[24]=st[8]^h,ie[25]=st[9]^s,i&&(ie[28]=~ie[28],ie[29]=~ie[29]);let u=0;const b=ro.SIGMA;for(let l=0;l<12;l++)Vt(0,4,8,12,t,n+2*b[u++]),qt(0,4,8,12,t,n+2*b[u++]),Vt(1,5,9,13,t,n+2*b[u++]),qt(1,5,9,13,t,n+2*b[u++]),Vt(2,6,10,14,t,n+2*b[u++]),qt(2,6,10,14,t,n+2*b[u++]),Vt(3,7,11,15,t,n+2*b[u++]),qt(3,7,11,15,t,n+2*b[u++]),Vt(0,5,10,15,t,n+2*b[u++]),qt(0,5,10,15,t,n+2*b[u++]),Vt(1,6,11,12,t,n+2*b[u++]),qt(1,6,11,12,t,n+2*b[u++]),Vt(2,7,8,13,t,n+2*b[u++]),qt(2,7,8,13,t,n+2*b[u++]),Vt(3,4,9,14,t,n+2*b[u++]),qt(3,4,9,14,t,n+2*b[u++]);this.v0l^=ie[0]^ie[16],this.v0h^=ie[1]^ie[17],this.v1l^=ie[2]^ie[18],this.v1h^=ie[3]^ie[19],this.v2l^=ie[4]^ie[20],this.v2h^=ie[5]^ie[21],this.v3l^=ie[6]^ie[22],this.v3h^=ie[7]^ie[23],this.v4l^=ie[8]^ie[24],this.v4h^=ie[9]^ie[25],this.v5l^=ie[10]^ie[26],this.v5h^=ie[11]^ie[27],this.v6l^=ie[12]^ie[28],this.v6h^=ie[13]^ie[29],this.v7l^=ie[14]^ie[30],this.v7h^=ie[15]^ie[31],ie.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}sr.blake2b=(0,cr.wrapConstructorWithOpts)(e=>new da(e));var In=Object.defineProperty,ba=Object.getOwnPropertyDescriptor,ya=Object.getOwnPropertyNames,pa=Object.prototype.hasOwnProperty,ga=(e,t)=>{for(var n in t)In(e,n,{get:t[n],enumerable:!0})},xa=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of ya(t))!pa.call(e,s)&&s!==n&&In(e,s,{get:()=>t[s],enumerable:!(i=ba(t,s))||i.enumerable});return e},wa=e=>xa(In({},"__esModule",{value:!0}),e),no={};ga(no,{PublicKey:()=>ma,bytesEqual:()=>fo});var xr=wa(no),io=vt,Un=Pn,oo=sr,_a=rn,so=Ir,va=xt;function fo(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}class ma{equals(t){return fo(this.toRawBytes(),t.toRawBytes())}toBase64(){return(0,io.toB64)(this.toRawBytes())}toString(){return this.toBase64()}toSuiPublicKey(){const t=this.toSuiBytes();return(0,io.toB64)(t)}verifyWithIntent(t,n,i){const s=(0,Un.messageWithIntent)(i,t),h=(0,oo.blake2b)(s,{dkLen:32});return this.verify(h,n)}verifyPersonalMessage(t,n){return this.verifyWithIntent(_a.bcs.ser(["vector","u8"],t).toBytes(),n,Un.IntentScope.PersonalMessage)}verifyTransactionBlock(t,n){return this.verifyWithIntent(t,n,Un.IntentScope.TransactionData)}toSuiBytes(){const t=this.toRawBytes(),n=new Uint8Array(t.length+1);return n.set([this.flag()]),n.set(t,1),n}toBytes(){return this.toRawBytes()}toSuiAddress(){return(0,so.normalizeSuiAddress)((0,va.bytesToHex)((0,oo.blake2b)(this.toSuiBytes(),{dkLen:32})).slice(0,so.SUI_ADDRESS_LENGTH*2))}}var jn=Object.defineProperty,Ea=Object.getOwnPropertyDescriptor,Sa=Object.getOwnPropertyNames,Ba=Object.prototype.hasOwnProperty,Aa=(e,t)=>{for(var n in t)jn(e,n,{get:t[n],enumerable:!0})},Ta=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Sa(t))!Ba.call(e,s)&&s!==n&&jn(e,s,{get:()=>t[s],enumerable:!(i=Ea(t,s))||i.enumerable});return e},Oa=e=>Ta(jn({},"__esModule",{value:!0}),e),ao={};Aa(ao,{BaseSigner:()=>co,Keypair:()=>Ra,LEGACY_PRIVATE_KEY_SIZE:()=>Ca,PRIVATE_KEY_SIZE:()=>$a});var Pa=Oa(ao),Ia=nr,Nn=Pn,Ua=sr,ja=rn,Na=vt;const $a=32,Ca=64;class co{async signWithIntent(t,n){const i=(0,Nn.messageWithIntent)(n,t),s=(0,Ua.blake2b)(i,{dkLen:32});return{signature:(0,Ia.toSerializedSignature)({signature:await this.sign(s),signatureScheme:this.getKeyScheme(),pubKey:this.getPublicKey()}),bytes:(0,Na.toB64)(t)}}async signTransactionBlock(t){return this.signWithIntent(t,Nn.IntentScope.TransactionData)}async signPersonalMessage(t){return this.signWithIntent(ja.bcs.ser(["vector","u8"],t).toBytes(),Nn.IntentScope.PersonalMessage)}async signMessage(t){return this.signPersonalMessage(t)}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}class Ra extends co{}(function(e){var t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,h=(O,U)=>{for(var $ in U)t(O,$,{get:U[$],enumerable:!0})},u=(O,U,$,D)=>{if(U&&typeof U=="object"||typeof U=="function")for(let Z of i(U))!s.call(O,Z)&&Z!==$&&t(O,Z,{get:()=>U[Z],enumerable:!(D=n(U,Z))||D.enumerable});return O},b=(O,U,$)=>(u(O,U,"default"),$&&u($,U,"default")),l=O=>u(t({},"__esModule",{value:!0}),O),p={};h(p,{Keypair:()=>w.Keypair,PublicKey:()=>B.PublicKey,Signer:()=>w.BaseSigner}),e.exports=l(p),b(p,nr,e.exports),b(p,Jf,e.exports),b(p,Pn,e.exports);var B=xr,w=Pa})(ii);function La(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var uo={exports:{}};const Ma=ss(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));(function(e){(function(t){var n=function(o){var a,f=new Float64Array(16);if(o)for(a=0;a<o.length;a++)f[a]=o[a];return f},i=function(){throw new Error("no PRNG")},s=new Uint8Array(16),h=new Uint8Array(32);h[0]=9;var u=n(),b=n([1]),l=n([56129,1]),p=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),B=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),w=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),O=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),U=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function $(o,a,f,r){o[a]=f>>24&255,o[a+1]=f>>16&255,o[a+2]=f>>8&255,o[a+3]=f&255,o[a+4]=r>>24&255,o[a+5]=r>>16&255,o[a+6]=r>>8&255,o[a+7]=r&255}function D(o,a,f,r,c){var _,E=0;for(_=0;_<c;_++)E|=o[a+_]^f[r+_];return(1&E-1>>>8)-1}function Z(o,a,f,r){return D(o,a,f,r,16)}function pe(o,a,f,r){return D(o,a,f,r,32)}function v(o,a,f,r){for(var c=r[0]&255|(r[1]&255)<<8|(r[2]&255)<<16|(r[3]&255)<<24,_=f[0]&255|(f[1]&255)<<8|(f[2]&255)<<16|(f[3]&255)<<24,E=f[4]&255|(f[5]&255)<<8|(f[6]&255)<<16|(f[7]&255)<<24,L=f[8]&255|(f[9]&255)<<8|(f[10]&255)<<16|(f[11]&255)<<24,Y=f[12]&255|(f[13]&255)<<8|(f[14]&255)<<16|(f[15]&255)<<24,be=r[4]&255|(r[5]&255)<<8|(r[6]&255)<<16|(r[7]&255)<<24,se=a[0]&255|(a[1]&255)<<8|(a[2]&255)<<16|(a[3]&255)<<24,Me=a[4]&255|(a[5]&255)<<8|(a[6]&255)<<16|(a[7]&255)<<24,ue=a[8]&255|(a[9]&255)<<8|(a[10]&255)<<16|(a[11]&255)<<24,we=a[12]&255|(a[13]&255)<<8|(a[14]&255)<<16|(a[15]&255)<<24,ve=r[8]&255|(r[9]&255)<<8|(r[10]&255)<<16|(r[11]&255)<<24,Oe=f[16]&255|(f[17]&255)<<8|(f[18]&255)<<16|(f[19]&255)<<24,Ae=f[20]&255|(f[21]&255)<<8|(f[22]&255)<<16|(f[23]&255)<<24,me=f[24]&255|(f[25]&255)<<8|(f[26]&255)<<16|(f[27]&255)<<24,Be=f[28]&255|(f[29]&255)<<8|(f[30]&255)<<16|(f[31]&255)<<24,Ee=r[12]&255|(r[13]&255)<<8|(r[14]&255)<<16|(r[15]&255)<<24,le=c,ye=_,ae=E,he=L,de=Y,oe=be,P=se,I=Me,G=ue,R=we,M=ve,z=Oe,xe=Ae,Pe=me,Ue=Be,Ie=Ee,y,Ce=0;Ce<20;Ce+=2)y=le+xe|0,de^=y<<7|y>>>32-7,y=de+le|0,G^=y<<9|y>>>32-9,y=G+de|0,xe^=y<<13|y>>>32-13,y=xe+G|0,le^=y<<18|y>>>32-18,y=oe+ye|0,R^=y<<7|y>>>32-7,y=R+oe|0,Pe^=y<<9|y>>>32-9,y=Pe+R|0,ye^=y<<13|y>>>32-13,y=ye+Pe|0,oe^=y<<18|y>>>32-18,y=M+P|0,Ue^=y<<7|y>>>32-7,y=Ue+M|0,ae^=y<<9|y>>>32-9,y=ae+Ue|0,P^=y<<13|y>>>32-13,y=P+ae|0,M^=y<<18|y>>>32-18,y=Ie+z|0,he^=y<<7|y>>>32-7,y=he+Ie|0,I^=y<<9|y>>>32-9,y=I+he|0,z^=y<<13|y>>>32-13,y=z+I|0,Ie^=y<<18|y>>>32-18,y=le+he|0,ye^=y<<7|y>>>32-7,y=ye+le|0,ae^=y<<9|y>>>32-9,y=ae+ye|0,he^=y<<13|y>>>32-13,y=he+ae|0,le^=y<<18|y>>>32-18,y=oe+de|0,P^=y<<7|y>>>32-7,y=P+oe|0,I^=y<<9|y>>>32-9,y=I+P|0,de^=y<<13|y>>>32-13,y=de+I|0,oe^=y<<18|y>>>32-18,y=M+R|0,z^=y<<7|y>>>32-7,y=z+M|0,G^=y<<9|y>>>32-9,y=G+z|0,R^=y<<13|y>>>32-13,y=R+G|0,M^=y<<18|y>>>32-18,y=Ie+Ue|0,xe^=y<<7|y>>>32-7,y=xe+Ie|0,Pe^=y<<9|y>>>32-9,y=Pe+xe|0,Ue^=y<<13|y>>>32-13,y=Ue+Pe|0,Ie^=y<<18|y>>>32-18;le=le+c|0,ye=ye+_|0,ae=ae+E|0,he=he+L|0,de=de+Y|0,oe=oe+be|0,P=P+se|0,I=I+Me|0,G=G+ue|0,R=R+we|0,M=M+ve|0,z=z+Oe|0,xe=xe+Ae|0,Pe=Pe+me|0,Ue=Ue+Be|0,Ie=Ie+Ee|0,o[0]=le>>>0&255,o[1]=le>>>8&255,o[2]=le>>>16&255,o[3]=le>>>24&255,o[4]=ye>>>0&255,o[5]=ye>>>8&255,o[6]=ye>>>16&255,o[7]=ye>>>24&255,o[8]=ae>>>0&255,o[9]=ae>>>8&255,o[10]=ae>>>16&255,o[11]=ae>>>24&255,o[12]=he>>>0&255,o[13]=he>>>8&255,o[14]=he>>>16&255,o[15]=he>>>24&255,o[16]=de>>>0&255,o[17]=de>>>8&255,o[18]=de>>>16&255,o[19]=de>>>24&255,o[20]=oe>>>0&255,o[21]=oe>>>8&255,o[22]=oe>>>16&255,o[23]=oe>>>24&255,o[24]=P>>>0&255,o[25]=P>>>8&255,o[26]=P>>>16&255,o[27]=P>>>24&255,o[28]=I>>>0&255,o[29]=I>>>8&255,o[30]=I>>>16&255,o[31]=I>>>24&255,o[32]=G>>>0&255,o[33]=G>>>8&255,o[34]=G>>>16&255,o[35]=G>>>24&255,o[36]=R>>>0&255,o[37]=R>>>8&255,o[38]=R>>>16&255,o[39]=R>>>24&255,o[40]=M>>>0&255,o[41]=M>>>8&255,o[42]=M>>>16&255,o[43]=M>>>24&255,o[44]=z>>>0&255,o[45]=z>>>8&255,o[46]=z>>>16&255,o[47]=z>>>24&255,o[48]=xe>>>0&255,o[49]=xe>>>8&255,o[50]=xe>>>16&255,o[51]=xe>>>24&255,o[52]=Pe>>>0&255,o[53]=Pe>>>8&255,o[54]=Pe>>>16&255,o[55]=Pe>>>24&255,o[56]=Ue>>>0&255,o[57]=Ue>>>8&255,o[58]=Ue>>>16&255,o[59]=Ue>>>24&255,o[60]=Ie>>>0&255,o[61]=Ie>>>8&255,o[62]=Ie>>>16&255,o[63]=Ie>>>24&255}function m(o,a,f,r){for(var c=r[0]&255|(r[1]&255)<<8|(r[2]&255)<<16|(r[3]&255)<<24,_=f[0]&255|(f[1]&255)<<8|(f[2]&255)<<16|(f[3]&255)<<24,E=f[4]&255|(f[5]&255)<<8|(f[6]&255)<<16|(f[7]&255)<<24,L=f[8]&255|(f[9]&255)<<8|(f[10]&255)<<16|(f[11]&255)<<24,Y=f[12]&255|(f[13]&255)<<8|(f[14]&255)<<16|(f[15]&255)<<24,be=r[4]&255|(r[5]&255)<<8|(r[6]&255)<<16|(r[7]&255)<<24,se=a[0]&255|(a[1]&255)<<8|(a[2]&255)<<16|(a[3]&255)<<24,Me=a[4]&255|(a[5]&255)<<8|(a[6]&255)<<16|(a[7]&255)<<24,ue=a[8]&255|(a[9]&255)<<8|(a[10]&255)<<16|(a[11]&255)<<24,we=a[12]&255|(a[13]&255)<<8|(a[14]&255)<<16|(a[15]&255)<<24,ve=r[8]&255|(r[9]&255)<<8|(r[10]&255)<<16|(r[11]&255)<<24,Oe=f[16]&255|(f[17]&255)<<8|(f[18]&255)<<16|(f[19]&255)<<24,Ae=f[20]&255|(f[21]&255)<<8|(f[22]&255)<<16|(f[23]&255)<<24,me=f[24]&255|(f[25]&255)<<8|(f[26]&255)<<16|(f[27]&255)<<24,Be=f[28]&255|(f[29]&255)<<8|(f[30]&255)<<16|(f[31]&255)<<24,Ee=r[12]&255|(r[13]&255)<<8|(r[14]&255)<<16|(r[15]&255)<<24,le=c,ye=_,ae=E,he=L,de=Y,oe=be,P=se,I=Me,G=ue,R=we,M=ve,z=Oe,xe=Ae,Pe=me,Ue=Be,Ie=Ee,y,Ce=0;Ce<20;Ce+=2)y=le+xe|0,de^=y<<7|y>>>32-7,y=de+le|0,G^=y<<9|y>>>32-9,y=G+de|0,xe^=y<<13|y>>>32-13,y=xe+G|0,le^=y<<18|y>>>32-18,y=oe+ye|0,R^=y<<7|y>>>32-7,y=R+oe|0,Pe^=y<<9|y>>>32-9,y=Pe+R|0,ye^=y<<13|y>>>32-13,y=ye+Pe|0,oe^=y<<18|y>>>32-18,y=M+P|0,Ue^=y<<7|y>>>32-7,y=Ue+M|0,ae^=y<<9|y>>>32-9,y=ae+Ue|0,P^=y<<13|y>>>32-13,y=P+ae|0,M^=y<<18|y>>>32-18,y=Ie+z|0,he^=y<<7|y>>>32-7,y=he+Ie|0,I^=y<<9|y>>>32-9,y=I+he|0,z^=y<<13|y>>>32-13,y=z+I|0,Ie^=y<<18|y>>>32-18,y=le+he|0,ye^=y<<7|y>>>32-7,y=ye+le|0,ae^=y<<9|y>>>32-9,y=ae+ye|0,he^=y<<13|y>>>32-13,y=he+ae|0,le^=y<<18|y>>>32-18,y=oe+de|0,P^=y<<7|y>>>32-7,y=P+oe|0,I^=y<<9|y>>>32-9,y=I+P|0,de^=y<<13|y>>>32-13,y=de+I|0,oe^=y<<18|y>>>32-18,y=M+R|0,z^=y<<7|y>>>32-7,y=z+M|0,G^=y<<9|y>>>32-9,y=G+z|0,R^=y<<13|y>>>32-13,y=R+G|0,M^=y<<18|y>>>32-18,y=Ie+Ue|0,xe^=y<<7|y>>>32-7,y=xe+Ie|0,Pe^=y<<9|y>>>32-9,y=Pe+xe|0,Ue^=y<<13|y>>>32-13,y=Ue+Pe|0,Ie^=y<<18|y>>>32-18;o[0]=le>>>0&255,o[1]=le>>>8&255,o[2]=le>>>16&255,o[3]=le>>>24&255,o[4]=oe>>>0&255,o[5]=oe>>>8&255,o[6]=oe>>>16&255,o[7]=oe>>>24&255,o[8]=M>>>0&255,o[9]=M>>>8&255,o[10]=M>>>16&255,o[11]=M>>>24&255,o[12]=Ie>>>0&255,o[13]=Ie>>>8&255,o[14]=Ie>>>16&255,o[15]=Ie>>>24&255,o[16]=P>>>0&255,o[17]=P>>>8&255,o[18]=P>>>16&255,o[19]=P>>>24&255,o[20]=I>>>0&255,o[21]=I>>>8&255,o[22]=I>>>16&255,o[23]=I>>>24&255,o[24]=G>>>0&255,o[25]=G>>>8&255,o[26]=G>>>16&255,o[27]=G>>>24&255,o[28]=R>>>0&255,o[29]=R>>>8&255,o[30]=R>>>16&255,o[31]=R>>>24&255}function d(o,a,f,r){v(o,a,f,r)}function V(o,a,f,r){m(o,a,f,r)}var S=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function j(o,a,f,r,c,_,E){var L=new Uint8Array(16),Y=new Uint8Array(64),be,se;for(se=0;se<16;se++)L[se]=0;for(se=0;se<8;se++)L[se]=_[se];for(;c>=64;){for(d(Y,L,E,S),se=0;se<64;se++)o[a+se]=f[r+se]^Y[se];for(be=1,se=8;se<16;se++)be=be+(L[se]&255)|0,L[se]=be&255,be>>>=8;c-=64,a+=64,r+=64}if(c>0)for(d(Y,L,E,S),se=0;se<c;se++)o[a+se]=f[r+se]^Y[se];return 0}function W(o,a,f,r,c){var _=new Uint8Array(16),E=new Uint8Array(64),L,Y;for(Y=0;Y<16;Y++)_[Y]=0;for(Y=0;Y<8;Y++)_[Y]=r[Y];for(;f>=64;){for(d(E,_,c,S),Y=0;Y<64;Y++)o[a+Y]=E[Y];for(L=1,Y=8;Y<16;Y++)L=L+(_[Y]&255)|0,_[Y]=L&255,L>>>=8;f-=64,a+=64}if(f>0)for(d(E,_,c,S),Y=0;Y<f;Y++)o[a+Y]=E[Y];return 0}function X(o,a,f,r,c){var _=new Uint8Array(32);V(_,r,c,S);for(var E=new Uint8Array(8),L=0;L<8;L++)E[L]=r[L+16];return W(o,a,f,E,_)}function H(o,a,f,r,c,_,E){var L=new Uint8Array(32);V(L,_,E,S);for(var Y=new Uint8Array(8),be=0;be<8;be++)Y[be]=_[be+16];return j(o,a,f,r,c,Y,L)}var g=function(o){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var a,f,r,c,_,E,L,Y;a=o[0]&255|(o[1]&255)<<8,this.r[0]=a&8191,f=o[2]&255|(o[3]&255)<<8,this.r[1]=(a>>>13|f<<3)&8191,r=o[4]&255|(o[5]&255)<<8,this.r[2]=(f>>>10|r<<6)&7939,c=o[6]&255|(o[7]&255)<<8,this.r[3]=(r>>>7|c<<9)&8191,_=o[8]&255|(o[9]&255)<<8,this.r[4]=(c>>>4|_<<12)&255,this.r[5]=_>>>1&8190,E=o[10]&255|(o[11]&255)<<8,this.r[6]=(_>>>14|E<<2)&8191,L=o[12]&255|(o[13]&255)<<8,this.r[7]=(E>>>11|L<<5)&8065,Y=o[14]&255|(o[15]&255)<<8,this.r[8]=(L>>>8|Y<<8)&8191,this.r[9]=Y>>>5&127,this.pad[0]=o[16]&255|(o[17]&255)<<8,this.pad[1]=o[18]&255|(o[19]&255)<<8,this.pad[2]=o[20]&255|(o[21]&255)<<8,this.pad[3]=o[22]&255|(o[23]&255)<<8,this.pad[4]=o[24]&255|(o[25]&255)<<8,this.pad[5]=o[26]&255|(o[27]&255)<<8,this.pad[6]=o[28]&255|(o[29]&255)<<8,this.pad[7]=o[30]&255|(o[31]&255)<<8};g.prototype.blocks=function(o,a,f){for(var r=this.fin?0:2048,c,_,E,L,Y,be,se,Me,ue,we,ve,Oe,Ae,me,Be,Ee,le,ye,ae,he=this.h[0],de=this.h[1],oe=this.h[2],P=this.h[3],I=this.h[4],G=this.h[5],R=this.h[6],M=this.h[7],z=this.h[8],xe=this.h[9],Pe=this.r[0],Ue=this.r[1],Ie=this.r[2],y=this.r[3],Ce=this.r[4],ke=this.r[5],De=this.r[6],$e=this.r[7],Re=this.r[8],Le=this.r[9];f>=16;)c=o[a+0]&255|(o[a+1]&255)<<8,he+=c&8191,_=o[a+2]&255|(o[a+3]&255)<<8,de+=(c>>>13|_<<3)&8191,E=o[a+4]&255|(o[a+5]&255)<<8,oe+=(_>>>10|E<<6)&8191,L=o[a+6]&255|(o[a+7]&255)<<8,P+=(E>>>7|L<<9)&8191,Y=o[a+8]&255|(o[a+9]&255)<<8,I+=(L>>>4|Y<<12)&8191,G+=Y>>>1&8191,be=o[a+10]&255|(o[a+11]&255)<<8,R+=(Y>>>14|be<<2)&8191,se=o[a+12]&255|(o[a+13]&255)<<8,M+=(be>>>11|se<<5)&8191,Me=o[a+14]&255|(o[a+15]&255)<<8,z+=(se>>>8|Me<<8)&8191,xe+=Me>>>5|r,ue=0,we=ue,we+=he*Pe,we+=de*(5*Le),we+=oe*(5*Re),we+=P*(5*$e),we+=I*(5*De),ue=we>>>13,we&=8191,we+=G*(5*ke),we+=R*(5*Ce),we+=M*(5*y),we+=z*(5*Ie),we+=xe*(5*Ue),ue+=we>>>13,we&=8191,ve=ue,ve+=he*Ue,ve+=de*Pe,ve+=oe*(5*Le),ve+=P*(5*Re),ve+=I*(5*$e),ue=ve>>>13,ve&=8191,ve+=G*(5*De),ve+=R*(5*ke),ve+=M*(5*Ce),ve+=z*(5*y),ve+=xe*(5*Ie),ue+=ve>>>13,ve&=8191,Oe=ue,Oe+=he*Ie,Oe+=de*Ue,Oe+=oe*Pe,Oe+=P*(5*Le),Oe+=I*(5*Re),ue=Oe>>>13,Oe&=8191,Oe+=G*(5*$e),Oe+=R*(5*De),Oe+=M*(5*ke),Oe+=z*(5*Ce),Oe+=xe*(5*y),ue+=Oe>>>13,Oe&=8191,Ae=ue,Ae+=he*y,Ae+=de*Ie,Ae+=oe*Ue,Ae+=P*Pe,Ae+=I*(5*Le),ue=Ae>>>13,Ae&=8191,Ae+=G*(5*Re),Ae+=R*(5*$e),Ae+=M*(5*De),Ae+=z*(5*ke),Ae+=xe*(5*Ce),ue+=Ae>>>13,Ae&=8191,me=ue,me+=he*Ce,me+=de*y,me+=oe*Ie,me+=P*Ue,me+=I*Pe,ue=me>>>13,me&=8191,me+=G*(5*Le),me+=R*(5*Re),me+=M*(5*$e),me+=z*(5*De),me+=xe*(5*ke),ue+=me>>>13,me&=8191,Be=ue,Be+=he*ke,Be+=de*Ce,Be+=oe*y,Be+=P*Ie,Be+=I*Ue,ue=Be>>>13,Be&=8191,Be+=G*Pe,Be+=R*(5*Le),Be+=M*(5*Re),Be+=z*(5*$e),Be+=xe*(5*De),ue+=Be>>>13,Be&=8191,Ee=ue,Ee+=he*De,Ee+=de*ke,Ee+=oe*Ce,Ee+=P*y,Ee+=I*Ie,ue=Ee>>>13,Ee&=8191,Ee+=G*Ue,Ee+=R*Pe,Ee+=M*(5*Le),Ee+=z*(5*Re),Ee+=xe*(5*$e),ue+=Ee>>>13,Ee&=8191,le=ue,le+=he*$e,le+=de*De,le+=oe*ke,le+=P*Ce,le+=I*y,ue=le>>>13,le&=8191,le+=G*Ie,le+=R*Ue,le+=M*Pe,le+=z*(5*Le),le+=xe*(5*Re),ue+=le>>>13,le&=8191,ye=ue,ye+=he*Re,ye+=de*$e,ye+=oe*De,ye+=P*ke,ye+=I*Ce,ue=ye>>>13,ye&=8191,ye+=G*y,ye+=R*Ie,ye+=M*Ue,ye+=z*Pe,ye+=xe*(5*Le),ue+=ye>>>13,ye&=8191,ae=ue,ae+=he*Le,ae+=de*Re,ae+=oe*$e,ae+=P*De,ae+=I*ke,ue=ae>>>13,ae&=8191,ae+=G*Ce,ae+=R*y,ae+=M*Ie,ae+=z*Ue,ae+=xe*Pe,ue+=ae>>>13,ae&=8191,ue=(ue<<2)+ue|0,ue=ue+we|0,we=ue&8191,ue=ue>>>13,ve+=ue,he=we,de=ve,oe=Oe,P=Ae,I=me,G=Be,R=Ee,M=le,z=ye,xe=ae,a+=16,f-=16;this.h[0]=he,this.h[1]=de,this.h[2]=oe,this.h[3]=P,this.h[4]=I,this.h[5]=G,this.h[6]=R,this.h[7]=M,this.h[8]=z,this.h[9]=xe},g.prototype.finish=function(o,a){var f=new Uint16Array(10),r,c,_,E;if(this.leftover){for(E=this.leftover,this.buffer[E++]=1;E<16;E++)this.buffer[E]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,E=2;E<10;E++)this.h[E]+=r,r=this.h[E]>>>13,this.h[E]&=8191;for(this.h[0]+=r*5,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,f[0]=this.h[0]+5,r=f[0]>>>13,f[0]&=8191,E=1;E<10;E++)f[E]=this.h[E]+r,r=f[E]>>>13,f[E]&=8191;for(f[9]-=1<<13,c=(r^1)-1,E=0;E<10;E++)f[E]&=c;for(c=~c,E=0;E<10;E++)this.h[E]=this.h[E]&c|f[E];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,_=this.h[0]+this.pad[0],this.h[0]=_&65535,E=1;E<8;E++)_=(this.h[E]+this.pad[E]|0)+(_>>>16)|0,this.h[E]=_&65535;o[a+0]=this.h[0]>>>0&255,o[a+1]=this.h[0]>>>8&255,o[a+2]=this.h[1]>>>0&255,o[a+3]=this.h[1]>>>8&255,o[a+4]=this.h[2]>>>0&255,o[a+5]=this.h[2]>>>8&255,o[a+6]=this.h[3]>>>0&255,o[a+7]=this.h[3]>>>8&255,o[a+8]=this.h[4]>>>0&255,o[a+9]=this.h[4]>>>8&255,o[a+10]=this.h[5]>>>0&255,o[a+11]=this.h[5]>>>8&255,o[a+12]=this.h[6]>>>0&255,o[a+13]=this.h[6]>>>8&255,o[a+14]=this.h[7]>>>0&255,o[a+15]=this.h[7]>>>8&255},g.prototype.update=function(o,a,f){var r,c;if(this.leftover){for(c=16-this.leftover,c>f&&(c=f),r=0;r<c;r++)this.buffer[this.leftover+r]=o[a+r];if(f-=c,a+=c,this.leftover+=c,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(f>=16&&(c=f-f%16,this.blocks(o,a,c),a+=c,f-=c),f){for(r=0;r<f;r++)this.buffer[this.leftover+r]=o[a+r];this.leftover+=f}};function x(o,a,f,r,c,_){var E=new g(_);return E.update(f,r,c),E.finish(o,a),0}function A(o,a,f,r,c,_){var E=new Uint8Array(16);return x(E,0,f,r,c,_),Z(o,a,E,0)}function Q(o,a,f,r,c){var _;if(f<32)return-1;for(H(o,0,a,0,f,r,c),x(o,16,o,32,f-32,o),_=0;_<16;_++)o[_]=0;return 0}function J(o,a,f,r,c){var _,E=new Uint8Array(32);if(f<32||(X(E,0,32,r,c),A(a,16,a,32,f-32,E)!==0))return-1;for(H(o,0,a,0,f,r,c),_=0;_<32;_++)o[_]=0;return 0}function K(o,a){var f;for(f=0;f<16;f++)o[f]=a[f]|0}function N(o){var a,f,r=1;for(a=0;a<16;a++)f=o[a]+r+65535,r=Math.floor(f/65536),o[a]=f-r*65536;o[0]+=r-1+37*(r-1)}function F(o,a,f){for(var r,c=~(f-1),_=0;_<16;_++)r=c&(o[_]^a[_]),o[_]^=r,a[_]^=r}function T(o,a){var f,r,c,_=n(),E=n();for(f=0;f<16;f++)E[f]=a[f];for(N(E),N(E),N(E),r=0;r<2;r++){for(_[0]=E[0]-65517,f=1;f<15;f++)_[f]=E[f]-65535-(_[f-1]>>16&1),_[f-1]&=65535;_[15]=E[15]-32767-(_[14]>>16&1),c=_[15]>>16&1,_[14]&=65535,F(E,_,1-c)}for(f=0;f<16;f++)o[2*f]=E[f]&255,o[2*f+1]=E[f]>>8}function C(o,a){var f=new Uint8Array(32),r=new Uint8Array(32);return T(f,o),T(r,a),pe(f,0,r,0)}function k(o){var a=new Uint8Array(32);return T(a,o),a[0]&1}function re(o,a){var f;for(f=0;f<16;f++)o[f]=a[2*f]+(a[2*f+1]<<8);o[15]&=32767}function ne(o,a,f){for(var r=0;r<16;r++)o[r]=a[r]+f[r]}function ee(o,a,f){for(var r=0;r<16;r++)o[r]=a[r]-f[r]}function q(o,a,f){var r,c,_=0,E=0,L=0,Y=0,be=0,se=0,Me=0,ue=0,we=0,ve=0,Oe=0,Ae=0,me=0,Be=0,Ee=0,le=0,ye=0,ae=0,he=0,de=0,oe=0,P=0,I=0,G=0,R=0,M=0,z=0,xe=0,Pe=0,Ue=0,Ie=0,y=f[0],Ce=f[1],ke=f[2],De=f[3],$e=f[4],Re=f[5],Le=f[6],nt=f[7],Ve=f[8],Je=f[9],Qe=f[10],et=f[11],ft=f[12],ht=f[13],dt=f[14],bt=f[15];r=a[0],_+=r*y,E+=r*Ce,L+=r*ke,Y+=r*De,be+=r*$e,se+=r*Re,Me+=r*Le,ue+=r*nt,we+=r*Ve,ve+=r*Je,Oe+=r*Qe,Ae+=r*et,me+=r*ft,Be+=r*ht,Ee+=r*dt,le+=r*bt,r=a[1],E+=r*y,L+=r*Ce,Y+=r*ke,be+=r*De,se+=r*$e,Me+=r*Re,ue+=r*Le,we+=r*nt,ve+=r*Ve,Oe+=r*Je,Ae+=r*Qe,me+=r*et,Be+=r*ft,Ee+=r*ht,le+=r*dt,ye+=r*bt,r=a[2],L+=r*y,Y+=r*Ce,be+=r*ke,se+=r*De,Me+=r*$e,ue+=r*Re,we+=r*Le,ve+=r*nt,Oe+=r*Ve,Ae+=r*Je,me+=r*Qe,Be+=r*et,Ee+=r*ft,le+=r*ht,ye+=r*dt,ae+=r*bt,r=a[3],Y+=r*y,be+=r*Ce,se+=r*ke,Me+=r*De,ue+=r*$e,we+=r*Re,ve+=r*Le,Oe+=r*nt,Ae+=r*Ve,me+=r*Je,Be+=r*Qe,Ee+=r*et,le+=r*ft,ye+=r*ht,ae+=r*dt,he+=r*bt,r=a[4],be+=r*y,se+=r*Ce,Me+=r*ke,ue+=r*De,we+=r*$e,ve+=r*Re,Oe+=r*Le,Ae+=r*nt,me+=r*Ve,Be+=r*Je,Ee+=r*Qe,le+=r*et,ye+=r*ft,ae+=r*ht,he+=r*dt,de+=r*bt,r=a[5],se+=r*y,Me+=r*Ce,ue+=r*ke,we+=r*De,ve+=r*$e,Oe+=r*Re,Ae+=r*Le,me+=r*nt,Be+=r*Ve,Ee+=r*Je,le+=r*Qe,ye+=r*et,ae+=r*ft,he+=r*ht,de+=r*dt,oe+=r*bt,r=a[6],Me+=r*y,ue+=r*Ce,we+=r*ke,ve+=r*De,Oe+=r*$e,Ae+=r*Re,me+=r*Le,Be+=r*nt,Ee+=r*Ve,le+=r*Je,ye+=r*Qe,ae+=r*et,he+=r*ft,de+=r*ht,oe+=r*dt,P+=r*bt,r=a[7],ue+=r*y,we+=r*Ce,ve+=r*ke,Oe+=r*De,Ae+=r*$e,me+=r*Re,Be+=r*Le,Ee+=r*nt,le+=r*Ve,ye+=r*Je,ae+=r*Qe,he+=r*et,de+=r*ft,oe+=r*ht,P+=r*dt,I+=r*bt,r=a[8],we+=r*y,ve+=r*Ce,Oe+=r*ke,Ae+=r*De,me+=r*$e,Be+=r*Re,Ee+=r*Le,le+=r*nt,ye+=r*Ve,ae+=r*Je,he+=r*Qe,de+=r*et,oe+=r*ft,P+=r*ht,I+=r*dt,G+=r*bt,r=a[9],ve+=r*y,Oe+=r*Ce,Ae+=r*ke,me+=r*De,Be+=r*$e,Ee+=r*Re,le+=r*Le,ye+=r*nt,ae+=r*Ve,he+=r*Je,de+=r*Qe,oe+=r*et,P+=r*ft,I+=r*ht,G+=r*dt,R+=r*bt,r=a[10],Oe+=r*y,Ae+=r*Ce,me+=r*ke,Be+=r*De,Ee+=r*$e,le+=r*Re,ye+=r*Le,ae+=r*nt,he+=r*Ve,de+=r*Je,oe+=r*Qe,P+=r*et,I+=r*ft,G+=r*ht,R+=r*dt,M+=r*bt,r=a[11],Ae+=r*y,me+=r*Ce,Be+=r*ke,Ee+=r*De,le+=r*$e,ye+=r*Re,ae+=r*Le,he+=r*nt,de+=r*Ve,oe+=r*Je,P+=r*Qe,I+=r*et,G+=r*ft,R+=r*ht,M+=r*dt,z+=r*bt,r=a[12],me+=r*y,Be+=r*Ce,Ee+=r*ke,le+=r*De,ye+=r*$e,ae+=r*Re,he+=r*Le,de+=r*nt,oe+=r*Ve,P+=r*Je,I+=r*Qe,G+=r*et,R+=r*ft,M+=r*ht,z+=r*dt,xe+=r*bt,r=a[13],Be+=r*y,Ee+=r*Ce,le+=r*ke,ye+=r*De,ae+=r*$e,he+=r*Re,de+=r*Le,oe+=r*nt,P+=r*Ve,I+=r*Je,G+=r*Qe,R+=r*et,M+=r*ft,z+=r*ht,xe+=r*dt,Pe+=r*bt,r=a[14],Ee+=r*y,le+=r*Ce,ye+=r*ke,ae+=r*De,he+=r*$e,de+=r*Re,oe+=r*Le,P+=r*nt,I+=r*Ve,G+=r*Je,R+=r*Qe,M+=r*et,z+=r*ft,xe+=r*ht,Pe+=r*dt,Ue+=r*bt,r=a[15],le+=r*y,ye+=r*Ce,ae+=r*ke,he+=r*De,de+=r*$e,oe+=r*Re,P+=r*Le,I+=r*nt,G+=r*Ve,R+=r*Je,M+=r*Qe,z+=r*et,xe+=r*ft,Pe+=r*ht,Ue+=r*dt,Ie+=r*bt,_+=38*ye,E+=38*ae,L+=38*he,Y+=38*de,be+=38*oe,se+=38*P,Me+=38*I,ue+=38*G,we+=38*R,ve+=38*M,Oe+=38*z,Ae+=38*xe,me+=38*Pe,Be+=38*Ue,Ee+=38*Ie,c=1,r=_+c+65535,c=Math.floor(r/65536),_=r-c*65536,r=E+c+65535,c=Math.floor(r/65536),E=r-c*65536,r=L+c+65535,c=Math.floor(r/65536),L=r-c*65536,r=Y+c+65535,c=Math.floor(r/65536),Y=r-c*65536,r=be+c+65535,c=Math.floor(r/65536),be=r-c*65536,r=se+c+65535,c=Math.floor(r/65536),se=r-c*65536,r=Me+c+65535,c=Math.floor(r/65536),Me=r-c*65536,r=ue+c+65535,c=Math.floor(r/65536),ue=r-c*65536,r=we+c+65535,c=Math.floor(r/65536),we=r-c*65536,r=ve+c+65535,c=Math.floor(r/65536),ve=r-c*65536,r=Oe+c+65535,c=Math.floor(r/65536),Oe=r-c*65536,r=Ae+c+65535,c=Math.floor(r/65536),Ae=r-c*65536,r=me+c+65535,c=Math.floor(r/65536),me=r-c*65536,r=Be+c+65535,c=Math.floor(r/65536),Be=r-c*65536,r=Ee+c+65535,c=Math.floor(r/65536),Ee=r-c*65536,r=le+c+65535,c=Math.floor(r/65536),le=r-c*65536,_+=c-1+37*(c-1),c=1,r=_+c+65535,c=Math.floor(r/65536),_=r-c*65536,r=E+c+65535,c=Math.floor(r/65536),E=r-c*65536,r=L+c+65535,c=Math.floor(r/65536),L=r-c*65536,r=Y+c+65535,c=Math.floor(r/65536),Y=r-c*65536,r=be+c+65535,c=Math.floor(r/65536),be=r-c*65536,r=se+c+65535,c=Math.floor(r/65536),se=r-c*65536,r=Me+c+65535,c=Math.floor(r/65536),Me=r-c*65536,r=ue+c+65535,c=Math.floor(r/65536),ue=r-c*65536,r=we+c+65535,c=Math.floor(r/65536),we=r-c*65536,r=ve+c+65535,c=Math.floor(r/65536),ve=r-c*65536,r=Oe+c+65535,c=Math.floor(r/65536),Oe=r-c*65536,r=Ae+c+65535,c=Math.floor(r/65536),Ae=r-c*65536,r=me+c+65535,c=Math.floor(r/65536),me=r-c*65536,r=Be+c+65535,c=Math.floor(r/65536),Be=r-c*65536,r=Ee+c+65535,c=Math.floor(r/65536),Ee=r-c*65536,r=le+c+65535,c=Math.floor(r/65536),le=r-c*65536,_+=c-1+37*(c-1),o[0]=_,o[1]=E,o[2]=L,o[3]=Y,o[4]=be,o[5]=se,o[6]=Me,o[7]=ue,o[8]=we,o[9]=ve,o[10]=Oe,o[11]=Ae,o[12]=me,o[13]=Be,o[14]=Ee,o[15]=le}function fe(o,a){q(o,a,a)}function Ke(o,a){var f=n(),r;for(r=0;r<16;r++)f[r]=a[r];for(r=253;r>=0;r--)fe(f,f),r!==2&&r!==4&&q(f,f,a);for(r=0;r<16;r++)o[r]=f[r]}function _e(o,a){var f=n(),r;for(r=0;r<16;r++)f[r]=a[r];for(r=250;r>=0;r--)fe(f,f),r!==1&&q(f,f,a);for(r=0;r<16;r++)o[r]=f[r]}function ge(o,a,f){var r=new Uint8Array(32),c=new Float64Array(80),_,E,L=n(),Y=n(),be=n(),se=n(),Me=n(),ue=n();for(E=0;E<31;E++)r[E]=a[E];for(r[31]=a[31]&127|64,r[0]&=248,re(c,f),E=0;E<16;E++)Y[E]=c[E],se[E]=L[E]=be[E]=0;for(L[0]=se[0]=1,E=254;E>=0;--E)_=r[E>>>3]>>>(E&7)&1,F(L,Y,_),F(be,se,_),ne(Me,L,be),ee(L,L,be),ne(be,Y,se),ee(Y,Y,se),fe(se,Me),fe(ue,L),q(L,be,L),q(be,Y,Me),ne(Me,L,be),ee(L,L,be),fe(Y,L),ee(be,se,ue),q(L,be,l),ne(L,L,se),q(be,be,L),q(L,se,ue),q(se,Y,c),fe(Y,Me),F(L,Y,_),F(be,se,_);for(E=0;E<16;E++)c[E+16]=L[E],c[E+32]=be[E],c[E+48]=Y[E],c[E+64]=se[E];var we=c.subarray(32),ve=c.subarray(16);return Ke(we,we),q(ve,ve,we),T(o,ve),0}function ze(o,a){return ge(o,a,h)}function We(o,a){return i(a,32),ze(o,a)}function rt(o,a,f){var r=new Uint8Array(32);return ge(r,f,a),V(o,s,r,S)}var te=Q,ce=J;function Te(o,a,f,r,c,_){var E=new Uint8Array(32);return rt(E,c,_),te(o,a,f,r,E)}function Ge(o,a,f,r,c,_){var E=new Uint8Array(32);return rt(E,c,_),ce(o,a,f,r,E)}var He=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ze(o,a,f,r){for(var c=new Int32Array(16),_=new Int32Array(16),E,L,Y,be,se,Me,ue,we,ve,Oe,Ae,me,Be,Ee,le,ye,ae,he,de,oe,P,I,G,R,M,z,xe=o[0],Pe=o[1],Ue=o[2],Ie=o[3],y=o[4],Ce=o[5],ke=o[6],De=o[7],$e=a[0],Re=a[1],Le=a[2],nt=a[3],Ve=a[4],Je=a[5],Qe=a[6],et=a[7],ft=0;r>=128;){for(de=0;de<16;de++)oe=8*de+ft,c[de]=f[oe+0]<<24|f[oe+1]<<16|f[oe+2]<<8|f[oe+3],_[de]=f[oe+4]<<24|f[oe+5]<<16|f[oe+6]<<8|f[oe+7];for(de=0;de<80;de++)if(E=xe,L=Pe,Y=Ue,be=Ie,se=y,Me=Ce,ue=ke,we=De,ve=$e,Oe=Re,Ae=Le,me=nt,Be=Ve,Ee=Je,le=Qe,ye=et,P=De,I=et,G=I&65535,R=I>>>16,M=P&65535,z=P>>>16,P=(y>>>14|Ve<<32-14)^(y>>>18|Ve<<32-18)^(Ve>>>41-32|y<<32-(41-32)),I=(Ve>>>14|y<<32-14)^(Ve>>>18|y<<32-18)^(y>>>41-32|Ve<<32-(41-32)),G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,P=y&Ce^~y&ke,I=Ve&Je^~Ve&Qe,G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,P=He[de*2],I=He[de*2+1],G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,P=c[de%16],I=_[de%16],G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,R+=G>>>16,M+=R>>>16,z+=M>>>16,ae=M&65535|z<<16,he=G&65535|R<<16,P=ae,I=he,G=I&65535,R=I>>>16,M=P&65535,z=P>>>16,P=(xe>>>28|$e<<32-28)^($e>>>34-32|xe<<32-(34-32))^($e>>>39-32|xe<<32-(39-32)),I=($e>>>28|xe<<32-28)^(xe>>>34-32|$e<<32-(34-32))^(xe>>>39-32|$e<<32-(39-32)),G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,P=xe&Pe^xe&Ue^Pe&Ue,I=$e&Re^$e&Le^Re&Le,G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,R+=G>>>16,M+=R>>>16,z+=M>>>16,we=M&65535|z<<16,ye=G&65535|R<<16,P=be,I=me,G=I&65535,R=I>>>16,M=P&65535,z=P>>>16,P=ae,I=he,G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,R+=G>>>16,M+=R>>>16,z+=M>>>16,be=M&65535|z<<16,me=G&65535|R<<16,Pe=E,Ue=L,Ie=Y,y=be,Ce=se,ke=Me,De=ue,xe=we,Re=ve,Le=Oe,nt=Ae,Ve=me,Je=Be,Qe=Ee,et=le,$e=ye,de%16===15)for(oe=0;oe<16;oe++)P=c[oe],I=_[oe],G=I&65535,R=I>>>16,M=P&65535,z=P>>>16,P=c[(oe+9)%16],I=_[(oe+9)%16],G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,ae=c[(oe+1)%16],he=_[(oe+1)%16],P=(ae>>>1|he<<32-1)^(ae>>>8|he<<32-8)^ae>>>7,I=(he>>>1|ae<<32-1)^(he>>>8|ae<<32-8)^(he>>>7|ae<<32-7),G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,ae=c[(oe+14)%16],he=_[(oe+14)%16],P=(ae>>>19|he<<32-19)^(he>>>61-32|ae<<32-(61-32))^ae>>>6,I=(he>>>19|ae<<32-19)^(ae>>>61-32|he<<32-(61-32))^(he>>>6|ae<<32-6),G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,R+=G>>>16,M+=R>>>16,z+=M>>>16,c[oe]=M&65535|z<<16,_[oe]=G&65535|R<<16;P=xe,I=$e,G=I&65535,R=I>>>16,M=P&65535,z=P>>>16,P=o[0],I=a[0],G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,R+=G>>>16,M+=R>>>16,z+=M>>>16,o[0]=xe=M&65535|z<<16,a[0]=$e=G&65535|R<<16,P=Pe,I=Re,G=I&65535,R=I>>>16,M=P&65535,z=P>>>16,P=o[1],I=a[1],G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,R+=G>>>16,M+=R>>>16,z+=M>>>16,o[1]=Pe=M&65535|z<<16,a[1]=Re=G&65535|R<<16,P=Ue,I=Le,G=I&65535,R=I>>>16,M=P&65535,z=P>>>16,P=o[2],I=a[2],G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,R+=G>>>16,M+=R>>>16,z+=M>>>16,o[2]=Ue=M&65535|z<<16,a[2]=Le=G&65535|R<<16,P=Ie,I=nt,G=I&65535,R=I>>>16,M=P&65535,z=P>>>16,P=o[3],I=a[3],G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,R+=G>>>16,M+=R>>>16,z+=M>>>16,o[3]=Ie=M&65535|z<<16,a[3]=nt=G&65535|R<<16,P=y,I=Ve,G=I&65535,R=I>>>16,M=P&65535,z=P>>>16,P=o[4],I=a[4],G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,R+=G>>>16,M+=R>>>16,z+=M>>>16,o[4]=y=M&65535|z<<16,a[4]=Ve=G&65535|R<<16,P=Ce,I=Je,G=I&65535,R=I>>>16,M=P&65535,z=P>>>16,P=o[5],I=a[5],G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,R+=G>>>16,M+=R>>>16,z+=M>>>16,o[5]=Ce=M&65535|z<<16,a[5]=Je=G&65535|R<<16,P=ke,I=Qe,G=I&65535,R=I>>>16,M=P&65535,z=P>>>16,P=o[6],I=a[6],G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,R+=G>>>16,M+=R>>>16,z+=M>>>16,o[6]=ke=M&65535|z<<16,a[6]=Qe=G&65535|R<<16,P=De,I=et,G=I&65535,R=I>>>16,M=P&65535,z=P>>>16,P=o[7],I=a[7],G+=I&65535,R+=I>>>16,M+=P&65535,z+=P>>>16,R+=G>>>16,M+=R>>>16,z+=M>>>16,o[7]=De=M&65535|z<<16,a[7]=et=G&65535|R<<16,ft+=128,r-=128}return r}function Fe(o,a,f){var r=new Int32Array(8),c=new Int32Array(8),_=new Uint8Array(256),E,L=f;for(r[0]=1779033703,r[1]=3144134277,r[2]=1013904242,r[3]=2773480762,r[4]=1359893119,r[5]=2600822924,r[6]=528734635,r[7]=1541459225,c[0]=4089235720,c[1]=2227873595,c[2]=4271175723,c[3]=1595750129,c[4]=2917565137,c[5]=725511199,c[6]=4215389547,c[7]=327033209,Ze(r,c,a,f),f%=128,E=0;E<f;E++)_[E]=a[L-f+E];for(_[f]=128,f=256-128*(f<112?1:0),_[f-9]=0,$(_,f-8,L/536870912|0,L<<3),Ze(r,c,_,f),E=0;E<8;E++)$(o,8*E,r[E],c[E]);return 0}function it(o,a){var f=n(),r=n(),c=n(),_=n(),E=n(),L=n(),Y=n(),be=n(),se=n();ee(f,o[1],o[0]),ee(se,a[1],a[0]),q(f,f,se),ne(r,o[0],o[1]),ne(se,a[0],a[1]),q(r,r,se),q(c,o[3],a[3]),q(c,c,B),q(_,o[2],a[2]),ne(_,_,_),ee(E,r,f),ee(L,_,c),ne(Y,_,c),ne(be,r,f),q(o[0],E,L),q(o[1],be,Y),q(o[2],Y,L),q(o[3],E,be)}function gt(o,a,f){var r;for(r=0;r<4;r++)F(o[r],a[r],f)}function Bt(o,a){var f=n(),r=n(),c=n();Ke(c,a[2]),q(f,a[0],c),q(r,a[1],c),T(o,r),o[31]^=k(f)<<7}function jt(o,a,f){var r,c;for(K(o[0],u),K(o[1],b),K(o[2],b),K(o[3],u),c=255;c>=0;--c)r=f[c/8|0]>>(c&7)&1,gt(o,a,r),it(a,o),it(o,o),gt(o,a,r)}function Nt(o,a){var f=[n(),n(),n(),n()];K(f[0],w),K(f[1],O),K(f[2],b),q(f[3],w,O),jt(o,f,a)}function At(o,a,f){var r=new Uint8Array(64),c=[n(),n(),n(),n()],_;for(f||i(a,32),Fe(r,a,32),r[0]&=248,r[31]&=127,r[31]|=64,Nt(c,r),Bt(o,c),_=0;_<32;_++)a[_+32]=o[_];return 0}var Wt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Pt(o,a){var f,r,c,_;for(r=63;r>=32;--r){for(f=0,c=r-32,_=r-12;c<_;++c)a[c]+=f-16*a[r]*Wt[c-(r-32)],f=Math.floor((a[c]+128)/256),a[c]-=f*256;a[c]+=f,a[r]=0}for(f=0,c=0;c<32;c++)a[c]+=f-(a[31]>>4)*Wt[c],f=a[c]>>8,a[c]&=255;for(c=0;c<32;c++)a[c]-=f*Wt[c];for(r=0;r<32;r++)a[r+1]+=a[r]>>8,o[r]=a[r]&255}function $t(o){var a=new Float64Array(64),f;for(f=0;f<64;f++)a[f]=o[f];for(f=0;f<64;f++)o[f]=0;Pt(o,a)}function _r(o,a,f,r){var c=new Uint8Array(64),_=new Uint8Array(64),E=new Uint8Array(64),L,Y,be=new Float64Array(64),se=[n(),n(),n(),n()];Fe(c,r,32),c[0]&=248,c[31]&=127,c[31]|=64;var Me=f+64;for(L=0;L<f;L++)o[64+L]=a[L];for(L=0;L<32;L++)o[32+L]=c[32+L];for(Fe(E,o.subarray(32),f+32),$t(E),Nt(se,E),Bt(o,se),L=32;L<64;L++)o[L]=r[L];for(Fe(_,o,f+64),$t(_),L=0;L<64;L++)be[L]=0;for(L=0;L<32;L++)be[L]=E[L];for(L=0;L<32;L++)for(Y=0;Y<32;Y++)be[L+Y]+=_[L]*c[Y];return Pt(o.subarray(32),be),Me}function Tt(o,a){var f=n(),r=n(),c=n(),_=n(),E=n(),L=n(),Y=n();return K(o[2],b),re(o[1],a),fe(c,o[1]),q(_,c,p),ee(c,c,o[2]),ne(_,o[2],_),fe(E,_),fe(L,E),q(Y,L,E),q(f,Y,c),q(f,f,_),_e(f,f),q(f,f,c),q(f,f,_),q(f,f,_),q(o[0],f,_),fe(r,o[0]),q(r,r,_),C(r,c)&&q(o[0],o[0],U),fe(r,o[0]),q(r,r,_),C(r,c)?-1:(k(o[0])===a[31]>>7&&ee(o[0],u,o[0]),q(o[3],o[0],o[1]),0)}function Ct(o,a,f,r){var c,_=new Uint8Array(32),E=new Uint8Array(64),L=[n(),n(),n(),n()],Y=[n(),n(),n(),n()];if(f<64||Tt(Y,r))return-1;for(c=0;c<f;c++)o[c]=a[c];for(c=0;c<32;c++)o[c+32]=r[c];if(Fe(E,o,f),$t(E),jt(L,Y,E),Nt(Y,a.subarray(32)),it(L,Y),Bt(_,L),f-=64,pe(a,0,_,0)){for(c=0;c<f;c++)o[c]=0;return-1}for(c=0;c<f;c++)o[c]=a[c+64];return f}var Zt=32,er=24,Ft=32,lr=16,vr=32,qr=32,mr=32,Er=32,Fn=32,Zo=er,i0=Ft,o0=lr,Mt=64,tr=32,hr=64,Xn=32,Jn=64;t.lowlevel={crypto_core_hsalsa20:V,crypto_stream_xor:H,crypto_stream:X,crypto_stream_salsa20_xor:j,crypto_stream_salsa20:W,crypto_onetimeauth:x,crypto_onetimeauth_verify:A,crypto_verify_16:Z,crypto_verify_32:pe,crypto_secretbox:Q,crypto_secretbox_open:J,crypto_scalarmult:ge,crypto_scalarmult_base:ze,crypto_box_beforenm:rt,crypto_box_afternm:te,crypto_box:Te,crypto_box_open:Ge,crypto_box_keypair:We,crypto_hash:Fe,crypto_sign:_r,crypto_sign_keypair:At,crypto_sign_open:Ct,crypto_secretbox_KEYBYTES:Zt,crypto_secretbox_NONCEBYTES:er,crypto_secretbox_ZEROBYTES:Ft,crypto_secretbox_BOXZEROBYTES:lr,crypto_scalarmult_BYTES:vr,crypto_scalarmult_SCALARBYTES:qr,crypto_box_PUBLICKEYBYTES:mr,crypto_box_SECRETKEYBYTES:Er,crypto_box_BEFORENMBYTES:Fn,crypto_box_NONCEBYTES:Zo,crypto_box_ZEROBYTES:i0,crypto_box_BOXZEROBYTES:o0,crypto_sign_BYTES:Mt,crypto_sign_PUBLICKEYBYTES:tr,crypto_sign_SECRETKEYBYTES:hr,crypto_sign_SEEDBYTES:Xn,crypto_hash_BYTES:Jn,gf:n,D:p,L:Wt,pack25519:T,unpack25519:re,M:q,A:ne,S:fe,Z:ee,pow2523:_e,add:it,set25519:K,modL:Pt,scalarmult:jt,scalarbase:Nt};function Fo(o,a){if(o.length!==Zt)throw new Error("bad key size");if(a.length!==er)throw new Error("bad nonce size")}function s0(o,a){if(o.length!==mr)throw new Error("bad public key size");if(a.length!==Er)throw new Error("bad secret key size")}function _t(){for(var o=0;o<arguments.length;o++)if(!(arguments[o]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Xo(o){for(var a=0;a<o.length;a++)o[a]=0}t.randomBytes=function(o){var a=new Uint8Array(o);return i(a,o),a},t.secretbox=function(o,a,f){_t(o,a,f),Fo(f,a);for(var r=new Uint8Array(Ft+o.length),c=new Uint8Array(r.length),_=0;_<o.length;_++)r[_+Ft]=o[_];return Q(c,r,r.length,a,f),c.subarray(lr)},t.secretbox.open=function(o,a,f){_t(o,a,f),Fo(f,a);for(var r=new Uint8Array(lr+o.length),c=new Uint8Array(r.length),_=0;_<o.length;_++)r[_+lr]=o[_];return r.length<32||J(c,r,r.length,a,f)!==0?null:c.subarray(Ft)},t.secretbox.keyLength=Zt,t.secretbox.nonceLength=er,t.secretbox.overheadLength=lr,t.scalarMult=function(o,a){if(_t(o,a),o.length!==qr)throw new Error("bad n size");if(a.length!==vr)throw new Error("bad p size");var f=new Uint8Array(vr);return ge(f,o,a),f},t.scalarMult.base=function(o){if(_t(o),o.length!==qr)throw new Error("bad n size");var a=new Uint8Array(vr);return ze(a,o),a},t.scalarMult.scalarLength=qr,t.scalarMult.groupElementLength=vr,t.box=function(o,a,f,r){var c=t.box.before(f,r);return t.secretbox(o,a,c)},t.box.before=function(o,a){_t(o,a),s0(o,a);var f=new Uint8Array(Fn);return rt(f,o,a),f},t.box.after=t.secretbox,t.box.open=function(o,a,f,r){var c=t.box.before(f,r);return t.secretbox.open(o,a,c)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var o=new Uint8Array(mr),a=new Uint8Array(Er);return We(o,a),{publicKey:o,secretKey:a}},t.box.keyPair.fromSecretKey=function(o){if(_t(o),o.length!==Er)throw new Error("bad secret key size");var a=new Uint8Array(mr);return ze(a,o),{publicKey:a,secretKey:new Uint8Array(o)}},t.box.publicKeyLength=mr,t.box.secretKeyLength=Er,t.box.sharedKeyLength=Fn,t.box.nonceLength=Zo,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(o,a){if(_t(o,a),a.length!==hr)throw new Error("bad secret key size");var f=new Uint8Array(Mt+o.length);return _r(f,o,o.length,a),f},t.sign.open=function(o,a){if(_t(o,a),a.length!==tr)throw new Error("bad public key size");var f=new Uint8Array(o.length),r=Ct(f,o,o.length,a);if(r<0)return null;for(var c=new Uint8Array(r),_=0;_<c.length;_++)c[_]=f[_];return c},t.sign.detached=function(o,a){for(var f=t.sign(o,a),r=new Uint8Array(Mt),c=0;c<r.length;c++)r[c]=f[c];return r},t.sign.detached.verify=function(o,a,f){if(_t(o,a,f),a.length!==Mt)throw new Error("bad signature size");if(f.length!==tr)throw new Error("bad public key size");var r=new Uint8Array(Mt+o.length),c=new Uint8Array(Mt+o.length),_;for(_=0;_<Mt;_++)r[_]=a[_];for(_=0;_<o.length;_++)r[_+Mt]=o[_];return Ct(c,r,r.length,f)>=0},t.sign.keyPair=function(){var o=new Uint8Array(tr),a=new Uint8Array(hr);return At(o,a),{publicKey:o,secretKey:a}},t.sign.keyPair.fromSecretKey=function(o){if(_t(o),o.length!==hr)throw new Error("bad secret key size");for(var a=new Uint8Array(tr),f=0;f<a.length;f++)a[f]=o[32+f];return{publicKey:a,secretKey:new Uint8Array(o)}},t.sign.keyPair.fromSeed=function(o){if(_t(o),o.length!==Xn)throw new Error("bad seed size");for(var a=new Uint8Array(tr),f=new Uint8Array(hr),r=0;r<32;r++)f[r]=o[r];return At(a,f,!0),{publicKey:a,secretKey:f}},t.sign.publicKeyLength=tr,t.sign.secretKeyLength=hr,t.sign.seedLength=Xn,t.sign.signatureLength=Mt,t.hash=function(o){_t(o);var a=new Uint8Array(Jn);return Fe(a,o,o.length),a},t.hash.hashLength=Jn,t.verify=function(o,a){return _t(o,a),o.length===0||a.length===0||o.length!==a.length?!1:D(o,0,a,0,o.length)===0},t.setPRNG=function(o){i=o},function(){var o=typeof self<"u"?self.crypto||self.msCrypto:null;if(o&&o.getRandomValues){var a=65536;t.setPRNG(function(f,r){var c,_=new Uint8Array(r);for(c=0;c<r;c+=a)o.getRandomValues(_.subarray(c,c+Math.min(r-c,a)));for(c=0;c<r;c++)f[c]=_[c];Xo(_)})}else typeof La<"u"&&(o=Ma,o&&o.randomBytes&&t.setPRNG(function(f,r){var c,_=o.randomBytes(r);for(c=0;c<r;c++)f[c]=_[c];Xo(_)}))}()})(e.exports?e.exports:self.nacl=self.nacl||{})})(uo);var ka=Object.create,kr=Object.defineProperty,Da=Object.getOwnPropertyDescriptor,Ha=Object.getOwnPropertyNames,Ka=Object.getPrototypeOf,Ga=Object.prototype.hasOwnProperty,Va=(e,t)=>{for(var n in t)kr(e,n,{get:t[n],enumerable:!0})},lo=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Ha(t))!Ga.call(e,s)&&s!==n&&kr(e,s,{get:()=>t[s],enumerable:!(i=Da(t,s))||i.enumerable});return e},qa=(e,t,n)=>(n=e!=null?ka(Ka(e)):{},lo(t||!e||!e.__esModule?kr(n,"default",{value:e,enumerable:!0}):n,e)),za=e=>lo(kr({},"__esModule",{value:!0}),e),ho={};Va(ho,{Ed25519PublicKey:()=>po});var Ya=za(ho),Wa=vt,bo=xr,yo=nr,Za=qa(uo.exports);const $n=32;class po extends bo.PublicKey{constructor(t){if(super(),typeof t=="string"?this.data=(0,Wa.fromB64)(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==$n)throw new Error(`Invalid public key input. Expected ${$n} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return yo.SIGNATURE_SCHEME_TO_FLAG.ED25519}async verify(t,n){let i;if(typeof n=="string"){const s=(0,yo.parseSerializedSignature)(n);if(s.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!(0,bo.bytesEqual)(this.toRawBytes(),s.publicKey))throw new Error("Signature does not match public key");i=s.signature}else i=n;return Za.default.sign.detached.verify(t,i,this.toRawBytes())}}po.SIZE=$n;var go={},Ne={},Se={};Object.defineProperty(Se,"__esModule",{value:!0}),Se.validateObject=Se.createHmacDrbg=Se.bitMask=Se.bitSet=Se.bitGet=Se.bitLen=Se.utf8ToBytes=Se.equalBytes=Se.concatBytes=Se.ensureBytes=Se.numberToVarBytesBE=Se.numberToBytesLE=Se.numberToBytesBE=Se.bytesToNumberLE=Se.bytesToNumberBE=Se.hexToBytes=Se.hexToNumber=Se.numberToHexUnpadded=Se.bytesToHex=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xo=BigInt(0),Dr=BigInt(1),Fa=BigInt(2),Hr=e=>e instanceof Uint8Array,Xa=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Cn(e){if(!Hr(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Xa[e[n]];return t}Se.bytesToHex=Cn;function wo(e){const t=e.toString(16);return t.length&1?`0${t}`:t}Se.numberToHexUnpadded=wo;function Rn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}Se.hexToNumber=Rn;function Kr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let i=0;i<n.length;i++){const s=i*2,h=e.slice(s,s+2),u=Number.parseInt(h,16);if(Number.isNaN(u)||u<0)throw new Error("Invalid byte sequence");n[i]=u}return n}Se.hexToBytes=Kr;function Ja(e){return Rn(Cn(e))}Se.bytesToNumberBE=Ja;function Qa(e){if(!Hr(e))throw new Error("Uint8Array expected");return Rn(Cn(Uint8Array.from(e).reverse()))}Se.bytesToNumberLE=Qa;function _o(e,t){return Kr(e.toString(16).padStart(t*2,"0"))}Se.numberToBytesBE=_o;function ec(e,t){return _o(e,t).reverse()}Se.numberToBytesLE=ec;function tc(e){return Kr(wo(e))}Se.numberToVarBytesBE=tc;function rc(e,t,n){let i;if(typeof t=="string")try{i=Kr(t)}catch(h){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${h}`)}else if(Hr(t))i=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const s=i.length;if(typeof n=="number"&&s!==n)throw new Error(`${e} expected ${n} bytes, got ${s}`);return i}Se.ensureBytes=rc;function vo(...e){const t=new Uint8Array(e.reduce((i,s)=>i+s.length,0));let n=0;return e.forEach(i=>{if(!Hr(i))throw new Error("Uint8Array expected");t.set(i,n),n+=i.length}),t}Se.concatBytes=vo;function nc(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}Se.equalBytes=nc;function ic(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}Se.utf8ToBytes=ic;function oc(e){let t;for(t=0;e>xo;e>>=Dr,t+=1);return t}Se.bitLen=oc;function sc(e,t){return e>>BigInt(t)&Dr}Se.bitGet=sc;const fc=(e,t,n)=>e|(n?Dr:xo)<<BigInt(t);Se.bitSet=fc;const ac=e=>(Fa<<BigInt(e-1))-Dr;Se.bitMask=ac;const Ln=e=>new Uint8Array(e),mo=e=>Uint8Array.from(e);function cc(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let i=Ln(e),s=Ln(e),h=0;const u=()=>{i.fill(1),s.fill(0),h=0},b=(...w)=>n(s,i,...w),l=(w=Ln())=>{s=b(mo([0]),w),i=b(),w.length!==0&&(s=b(mo([1]),w),i=b())},p=()=>{if(h++>=1e3)throw new Error("drbg: tried 1000 values");let w=0;const O=[];for(;w<t;){i=b();const U=i.slice();O.push(U),w+=i.length}return vo(...O)};return(w,O)=>{u(),l(w);let U;for(;!(U=O(p()));)l();return u(),U}}Se.createHmacDrbg=cc;const uc={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function lc(e,t,n={}){const i=(s,h,u)=>{const b=uc[h];if(typeof b!="function")throw new Error(`Invalid validator "${h}", expected function`);const l=e[s];if(!(u&&l===void 0)&&!b(l,e))throw new Error(`Invalid param ${String(s)}=${l} (${typeof l}), expected ${h}`)};for(const[s,h]of Object.entries(t))i(s,h,!1);for(const[s,h]of Object.entries(n))i(s,h,!0);return e}Se.validateObject=lc,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.hashToPrivateScalar=Ne.FpSqrtEven=Ne.FpSqrtOdd=Ne.Field=Ne.nLength=Ne.FpIsSquare=Ne.FpDiv=Ne.FpInvertBatch=Ne.FpPow=Ne.validateField=Ne.isNegativeLE=Ne.FpSqrt=Ne.tonelliShanks=Ne.invert=Ne.pow2=Ne.pow=Ne.mod=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lt=Se,at=BigInt(0),Ye=BigInt(1),zt=BigInt(2),hc=BigInt(3),Mn=BigInt(4),Eo=BigInt(5),So=BigInt(8);BigInt(9),BigInt(16);function St(e,t){const n=e%t;return n>=at?n:t+n}Ne.mod=St;function Bo(e,t,n){if(n<=at||t<at)throw new Error("Expected power/modulo > 0");if(n===Ye)return at;let i=Ye;for(;t>at;)t&Ye&&(i=i*e%n),e=e*e%n,t>>=Ye;return i}Ne.pow=Bo;function dc(e,t,n){let i=e;for(;t-- >at;)i*=i,i%=n;return i}Ne.pow2=dc;function Gr(e,t){if(e===at||t<=at)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=St(e,t),i=t,s=at,h=Ye;for(;n!==at;){const b=i/n,l=i%n,p=s-h*b;i=n,n=l,s=h,h=p}if(i!==Ye)throw new Error("invert: does not exist");return St(s,t)}Ne.invert=Gr;function Ao(e){const t=(e-Ye)/zt;let n,i,s;for(n=e-Ye,i=0;n%zt===at;n/=zt,i++);for(s=zt;s<e&&Bo(s,t,e)!==e-Ye;s++);if(i===1){const u=(e+Ye)/Mn;return function(l,p){const B=l.pow(p,u);if(!l.eql(l.sqr(B),p))throw new Error("Cannot find square root");return B}}const h=(n+Ye)/zt;return function(b,l){if(b.pow(l,t)===b.neg(b.ONE))throw new Error("Cannot find square root");let p=i,B=b.pow(b.mul(b.ONE,s),n),w=b.pow(l,h),O=b.pow(l,n);for(;!b.eql(O,b.ONE);){if(b.eql(O,b.ZERO))return b.ZERO;let U=1;for(let D=b.sqr(O);U<p&&!b.eql(D,b.ONE);U++)D=b.sqr(D);const $=b.pow(B,Ye<<BigInt(p-U-1));B=b.sqr($),w=b.mul(w,$),O=b.mul(O,B),p=U}return w}}Ne.tonelliShanks=Ao;function To(e){if(e%Mn===hc){const t=(e+Ye)/Mn;return function(i,s){const h=i.pow(s,t);if(!i.eql(i.sqr(h),s))throw new Error("Cannot find square root");return h}}if(e%So===Eo){const t=(e-Eo)/So;return function(i,s){const h=i.mul(s,zt),u=i.pow(h,t),b=i.mul(s,u),l=i.mul(i.mul(b,zt),u),p=i.mul(b,i.sub(l,i.ONE));if(!i.eql(i.sqr(p),s))throw new Error("Cannot find square root");return p}}return Ao(e)}Ne.FpSqrt=To;const bc=(e,t)=>(St(e,t)&Ye)===Ye;Ne.isNegativeLE=bc;const yc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function pc(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=yc.reduce((i,s)=>(i[s]="function",i),t);return(0,Lt.validateObject)(e,n)}Ne.validateField=pc;function Oo(e,t,n){if(n<at)throw new Error("Expected power > 0");if(n===at)return e.ONE;if(n===Ye)return t;let i=e.ONE,s=t;for(;n>at;)n&Ye&&(i=e.mul(i,s)),s=e.sqr(s),n>>=Ye;return i}Ne.FpPow=Oo;function Po(e,t){const n=new Array(t.length),i=t.reduce((h,u,b)=>e.is0(u)?h:(n[b]=h,e.mul(h,u)),e.ONE),s=e.inv(i);return t.reduceRight((h,u,b)=>e.is0(u)?h:(n[b]=e.mul(h,n[b]),e.mul(h,u)),s),n}Ne.FpInvertBatch=Po;function gc(e,t,n){return e.mul(t,typeof n=="bigint"?Gr(n,e.ORDER):e.inv(n))}Ne.FpDiv=gc;function xc(e){const t=(e.ORDER-Ye)/zt;return n=>{const i=e.pow(n,t);return e.eql(i,e.ZERO)||e.eql(i,e.ONE)}}Ne.FpIsSquare=xc;function kn(e,t){const n=t!==void 0?t:e.toString(2).length,i=Math.ceil(n/8);return{nBitLength:n,nByteLength:i}}Ne.nLength=kn;function wc(e,t,n=!1,i={}){if(e<=at)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:s,nByteLength:h}=kn(e,t);if(h>2048)throw new Error("Field lengths over 2048 bytes are not supported");const u=To(e),b=Object.freeze({ORDER:e,BITS:s,BYTES:h,MASK:(0,Lt.bitMask)(s),ZERO:at,ONE:Ye,create:l=>St(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return at<=l&&l<e},is0:l=>l===at,isOdd:l=>(l&Ye)===Ye,neg:l=>St(-l,e),eql:(l,p)=>l===p,sqr:l=>St(l*l,e),add:(l,p)=>St(l+p,e),sub:(l,p)=>St(l-p,e),mul:(l,p)=>St(l*p,e),pow:(l,p)=>Oo(b,l,p),div:(l,p)=>St(l*Gr(p,e),e),sqrN:l=>l*l,addN:(l,p)=>l+p,subN:(l,p)=>l-p,mulN:(l,p)=>l*p,inv:l=>Gr(l,e),sqrt:i.sqrt||(l=>u(b,l)),invertBatch:l=>Po(b,l),cmov:(l,p,B)=>B?p:l,toBytes:l=>n?(0,Lt.numberToBytesLE)(l,h):(0,Lt.numberToBytesBE)(l,h),fromBytes:l=>{if(l.length!==h)throw new Error(`Fp.fromBytes: expected ${h}, got ${l.length}`);return n?(0,Lt.bytesToNumberLE)(l):(0,Lt.bytesToNumberBE)(l)}});return Object.freeze(b)}Ne.Field=wc;function _c(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?n:e.neg(n)}Ne.FpSqrtOdd=_c;function vc(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?e.neg(n):n}Ne.FpSqrtEven=vc;function mc(e,t,n=!1){e=(0,Lt.ensureBytes)("privateHash",e);const i=e.length,s=kn(t).nByteLength+8;if(s<24||i<s||i>1024)throw new Error(`hashToPrivateScalar: expected ${s}-1024 bytes of input, got ${i}`);const h=n?(0,Lt.bytesToNumberLE)(e):(0,Lt.bytesToNumberBE)(e);return St(h,t-Ye)+Ye}Ne.hashToPrivateScalar=mc;var Vr={},ur={};Object.defineProperty(ur,"__esModule",{value:!0}),ur.validateBasic=ur.wNAF=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Io=Ne,Ec=Se,Sc=BigInt(0),Dn=BigInt(1);function Bc(e,t){const n=(s,h)=>{const u=h.negate();return s?u:h},i=s=>{const h=Math.ceil(t/s)+1,u=2**(s-1);return{windows:h,windowSize:u}};return{constTimeNegate:n,unsafeLadder(s,h){let u=e.ZERO,b=s;for(;h>Sc;)h&Dn&&(u=u.add(b)),b=b.double(),h>>=Dn;return u},precomputeWindow(s,h){const{windows:u,windowSize:b}=i(h),l=[];let p=s,B=p;for(let w=0;w<u;w++){B=p,l.push(B);for(let O=1;O<b;O++)B=B.add(p),l.push(B);p=B.double()}return l},wNAF(s,h,u){const{windows:b,windowSize:l}=i(s);let p=e.ZERO,B=e.BASE;const w=BigInt(2**s-1),O=2**s,U=BigInt(s);for(let $=0;$<b;$++){const D=$*l;let Z=Number(u&w);u>>=U,Z>l&&(Z-=O,u+=Dn);const pe=D,v=D+Math.abs(Z)-1,m=$%2!==0,d=Z<0;Z===0?B=B.add(n(m,h[pe])):p=p.add(n(d,h[v]))}return{p,f:B}},wNAFCached(s,h,u,b){const l=s._WINDOW_SIZE||1;let p=h.get(s);return p||(p=this.precomputeWindow(s,l),l!==1&&h.set(s,b(p))),this.wNAF(l,p,u)}}}ur.wNAF=Bc;function Ac(e){return(0,Io.validateField)(e.Fp),(0,Ec.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,Io.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}ur.validateBasic=Ac,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mapToCurveSimpleSWU=e.SWUFpSqrtRatio=e.weierstrass=e.weierstrassPoints=e.DER=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t=Ne,n=Se,i=Se,s=ur;function h(v){const m=(0,s.validateBasic)(v);n.validateObject(m,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:d,Fp:V,a:S}=m;if(d){if(!V.eql(S,V.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof d!="object"||typeof d.beta!="bigint"||typeof d.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...m})}const{bytesToNumberBE:u,hexToBytes:b}=n;e.DER={Err:class extends Error{constructor(m=""){super(m)}},_parseInt(v){const{Err:m}=e.DER;if(v.length<2||v[0]!==2)throw new m("Invalid signature integer tag");const d=v[1],V=v.subarray(2,d+2);if(!d||V.length!==d)throw new m("Invalid signature integer: wrong length");if(V[0]&128)throw new m("Invalid signature integer: negative");if(V[0]===0&&!(V[1]&128))throw new m("Invalid signature integer: unnecessary leading zero");return{d:u(V),l:v.subarray(d+2)}},toSig(v){const{Err:m}=e.DER,d=typeof v=="string"?b(v):v;if(!(d instanceof Uint8Array))throw new Error("ui8a expected");let V=d.length;if(V<2||d[0]!=48)throw new m("Invalid signature tag");if(d[1]!==V-2)throw new m("Invalid signature: incorrect length");const{d:S,l:j}=e.DER._parseInt(d.subarray(2)),{d:W,l:X}=e.DER._parseInt(j);if(X.length)throw new m("Invalid signature: left bytes after parsing");return{r:S,s:W}},hexFromSig(v){const m=g=>Number.parseInt(g[0],16)&8?"00"+g:g,d=g=>{const x=g.toString(16);return x.length&1?`0${x}`:x},V=m(d(v.s)),S=m(d(v.r)),j=V.length/2,W=S.length/2,X=d(j),H=d(W);return`30${d(W+j+4)}02${H}${S}02${X}${V}`}};const l=BigInt(0),p=BigInt(1),B=BigInt(2),w=BigInt(3),O=BigInt(4);function U(v){const m=h(v),{Fp:d}=m,V=m.toBytes||((K,N,F)=>{const T=N.toAffine();return n.concatBytes(Uint8Array.from([4]),d.toBytes(T.x),d.toBytes(T.y))}),S=m.fromBytes||(K=>{const N=K.subarray(1),F=d.fromBytes(N.subarray(0,d.BYTES)),T=d.fromBytes(N.subarray(d.BYTES,2*d.BYTES));return{x:F,y:T}});function j(K){const{a:N,b:F}=m,T=d.sqr(K),C=d.mul(T,K);return d.add(d.add(C,d.mul(K,N)),F)}if(!d.eql(d.sqr(m.Gy),j(m.Gx)))throw new Error("bad generator point: equation left != right");function W(K){return typeof K=="bigint"&&l<K&&K<m.n}function X(K){if(!W(K))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function H(K){const{allowedPrivateKeyLengths:N,nByteLength:F,wrapPrivateKey:T,n:C}=m;if(N&&typeof K!="bigint"){if(K instanceof Uint8Array&&(K=n.bytesToHex(K)),typeof K!="string"||!N.includes(K.length))throw new Error("Invalid key");K=K.padStart(F*2,"0")}let k;try{k=typeof K=="bigint"?K:n.bytesToNumberBE((0,i.ensureBytes)("private key",K,F))}catch{throw new Error(`private key must be ${F} bytes, hex or bigint, not ${typeof K}`)}return T&&(k=t.mod(k,C)),X(k),k}const g=new Map;function x(K){if(!(K instanceof A))throw new Error("ProjectivePoint expected")}class A{constructor(N,F,T){if(this.px=N,this.py=F,this.pz=T,N==null||!d.isValid(N))throw new Error("x required");if(F==null||!d.isValid(F))throw new Error("y required");if(T==null||!d.isValid(T))throw new Error("z required")}static fromAffine(N){const{x:F,y:T}=N||{};if(!N||!d.isValid(F)||!d.isValid(T))throw new Error("invalid affine point");if(N instanceof A)throw new Error("projective point not allowed");const C=k=>d.eql(k,d.ZERO);return C(F)&&C(T)?A.ZERO:new A(F,T,d.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(N){const F=d.invertBatch(N.map(T=>T.pz));return N.map((T,C)=>T.toAffine(F[C])).map(A.fromAffine)}static fromHex(N){const F=A.fromAffine(S((0,i.ensureBytes)("pointHex",N)));return F.assertValidity(),F}static fromPrivateKey(N){return A.BASE.multiply(H(N))}_setWindowSize(N){this._WINDOW_SIZE=N,g.delete(this)}assertValidity(){if(this.is0()){if(m.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:N,y:F}=this.toAffine();if(!d.isValid(N)||!d.isValid(F))throw new Error("bad point: x or y not FE");const T=d.sqr(F),C=j(N);if(!d.eql(T,C))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:N}=this.toAffine();if(d.isOdd)return!d.isOdd(N);throw new Error("Field doesn't support isOdd")}equals(N){x(N);const{px:F,py:T,pz:C}=this,{px:k,py:re,pz:ne}=N,ee=d.eql(d.mul(F,ne),d.mul(k,C)),q=d.eql(d.mul(T,ne),d.mul(re,C));return ee&&q}negate(){return new A(this.px,d.neg(this.py),this.pz)}double(){const{a:N,b:F}=m,T=d.mul(F,w),{px:C,py:k,pz:re}=this;let ne=d.ZERO,ee=d.ZERO,q=d.ZERO,fe=d.mul(C,C),Ke=d.mul(k,k),_e=d.mul(re,re),ge=d.mul(C,k);return ge=d.add(ge,ge),q=d.mul(C,re),q=d.add(q,q),ne=d.mul(N,q),ee=d.mul(T,_e),ee=d.add(ne,ee),ne=d.sub(Ke,ee),ee=d.add(Ke,ee),ee=d.mul(ne,ee),ne=d.mul(ge,ne),q=d.mul(T,q),_e=d.mul(N,_e),ge=d.sub(fe,_e),ge=d.mul(N,ge),ge=d.add(ge,q),q=d.add(fe,fe),fe=d.add(q,fe),fe=d.add(fe,_e),fe=d.mul(fe,ge),ee=d.add(ee,fe),_e=d.mul(k,re),_e=d.add(_e,_e),fe=d.mul(_e,ge),ne=d.sub(ne,fe),q=d.mul(_e,Ke),q=d.add(q,q),q=d.add(q,q),new A(ne,ee,q)}add(N){x(N);const{px:F,py:T,pz:C}=this,{px:k,py:re,pz:ne}=N;let ee=d.ZERO,q=d.ZERO,fe=d.ZERO;const Ke=m.a,_e=d.mul(m.b,w);let ge=d.mul(F,k),ze=d.mul(T,re),We=d.mul(C,ne),rt=d.add(F,T),te=d.add(k,re);rt=d.mul(rt,te),te=d.add(ge,ze),rt=d.sub(rt,te),te=d.add(F,C);let ce=d.add(k,ne);return te=d.mul(te,ce),ce=d.add(ge,We),te=d.sub(te,ce),ce=d.add(T,C),ee=d.add(re,ne),ce=d.mul(ce,ee),ee=d.add(ze,We),ce=d.sub(ce,ee),fe=d.mul(Ke,te),ee=d.mul(_e,We),fe=d.add(ee,fe),ee=d.sub(ze,fe),fe=d.add(ze,fe),q=d.mul(ee,fe),ze=d.add(ge,ge),ze=d.add(ze,ge),We=d.mul(Ke,We),te=d.mul(_e,te),ze=d.add(ze,We),We=d.sub(ge,We),We=d.mul(Ke,We),te=d.add(te,We),ge=d.mul(ze,te),q=d.add(q,ge),ge=d.mul(ce,te),ee=d.mul(rt,ee),ee=d.sub(ee,ge),ge=d.mul(rt,ze),fe=d.mul(ce,fe),fe=d.add(fe,ge),new A(ee,q,fe)}subtract(N){return this.add(N.negate())}is0(){return this.equals(A.ZERO)}wNAF(N){return J.wNAFCached(this,g,N,F=>{const T=d.invertBatch(F.map(C=>C.pz));return F.map((C,k)=>C.toAffine(T[k])).map(A.fromAffine)})}multiplyUnsafe(N){const F=A.ZERO;if(N===l)return F;if(X(N),N===p)return this;const{endo:T}=m;if(!T)return J.unsafeLadder(this,N);let{k1neg:C,k1:k,k2neg:re,k2:ne}=T.splitScalar(N),ee=F,q=F,fe=this;for(;k>l||ne>l;)k&p&&(ee=ee.add(fe)),ne&p&&(q=q.add(fe)),fe=fe.double(),k>>=p,ne>>=p;return C&&(ee=ee.negate()),re&&(q=q.negate()),q=new A(d.mul(q.px,T.beta),q.py,q.pz),ee.add(q)}multiply(N){X(N);let F=N,T,C;const{endo:k}=m;if(k){const{k1neg:re,k1:ne,k2neg:ee,k2:q}=k.splitScalar(F);let{p:fe,f:Ke}=this.wNAF(ne),{p:_e,f:ge}=this.wNAF(q);fe=J.constTimeNegate(re,fe),_e=J.constTimeNegate(ee,_e),_e=new A(d.mul(_e.px,k.beta),_e.py,_e.pz),T=fe.add(_e),C=Ke.add(ge)}else{const{p:re,f:ne}=this.wNAF(F);T=re,C=ne}return A.normalizeZ([T,C])[0]}multiplyAndAddUnsafe(N,F,T){const C=A.BASE,k=(ne,ee)=>ee===l||ee===p||!ne.equals(C)?ne.multiplyUnsafe(ee):ne.multiply(ee),re=k(this,F).add(k(N,T));return re.is0()?void 0:re}toAffine(N){const{px:F,py:T,pz:C}=this,k=this.is0();N==null&&(N=k?d.ONE:d.inv(C));const re=d.mul(F,N),ne=d.mul(T,N),ee=d.mul(C,N);if(k)return{x:d.ZERO,y:d.ZERO};if(!d.eql(ee,d.ONE))throw new Error("invZ was invalid");return{x:re,y:ne}}isTorsionFree(){const{h:N,isTorsionFree:F}=m;if(N===p)return!0;if(F)return F(A,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:N,clearCofactor:F}=m;return N===p?this:F?F(A,this):this.multiplyUnsafe(m.h)}toRawBytes(N=!0){return this.assertValidity(),V(A,this,N)}toHex(N=!0){return n.bytesToHex(this.toRawBytes(N))}}A.BASE=new A(m.Gx,m.Gy,d.ONE),A.ZERO=new A(d.ZERO,d.ONE,d.ZERO);const Q=m.nBitLength,J=(0,s.wNAF)(A,m.endo?Math.ceil(Q/2):Q);return{CURVE:m,ProjectivePoint:A,normPrivateKeyToScalar:H,weierstrassEquation:j,isWithinCurveOrder:W}}e.weierstrassPoints=U;function $(v){const m=(0,s.validateBasic)(v);return n.validateObject(m,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...m})}function D(v){const m=$(v),{Fp:d,n:V}=m,S=d.BYTES+1,j=2*d.BYTES+1;function W(te){return l<te&&te<d.ORDER}function X(te){return t.mod(te,V)}function H(te){return t.invert(te,V)}const{ProjectivePoint:g,normPrivateKeyToScalar:x,weierstrassEquation:A,isWithinCurveOrder:Q}=U({...m,toBytes(te,ce,Te){const Ge=ce.toAffine(),He=d.toBytes(Ge.x),Ze=n.concatBytes;return Te?Ze(Uint8Array.from([ce.hasEvenY()?2:3]),He):Ze(Uint8Array.from([4]),He,d.toBytes(Ge.y))},fromBytes(te){const ce=te.length,Te=te[0],Ge=te.subarray(1);if(ce===S&&(Te===2||Te===3)){const He=n.bytesToNumberBE(Ge);if(!W(He))throw new Error("Point is not on curve");const Ze=A(He);let Fe=d.sqrt(Ze);const it=(Fe&p)===p;return(Te&1)===1!==it&&(Fe=d.neg(Fe)),{x:He,y:Fe}}else if(ce===j&&Te===4){const He=d.fromBytes(Ge.subarray(0,d.BYTES)),Ze=d.fromBytes(Ge.subarray(d.BYTES,2*d.BYTES));return{x:He,y:Ze}}else throw new Error(`Point of length ${ce} was invalid. Expected ${S} compressed bytes or ${j} uncompressed bytes`)}}),J=te=>n.bytesToHex(n.numberToBytesBE(te,m.nByteLength));function K(te){const ce=V>>p;return te>ce}function N(te){return K(te)?X(-te):te}const F=(te,ce,Te)=>n.bytesToNumberBE(te.slice(ce,Te));class T{constructor(ce,Te,Ge){this.r=ce,this.s=Te,this.recovery=Ge,this.assertValidity()}static fromCompact(ce){const Te=m.nByteLength;return ce=(0,i.ensureBytes)("compactSignature",ce,Te*2),new T(F(ce,0,Te),F(ce,Te,2*Te))}static fromDER(ce){const{r:Te,s:Ge}=e.DER.toSig((0,i.ensureBytes)("DER",ce));return new T(Te,Ge)}assertValidity(){if(!Q(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!Q(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(ce){return new T(this.r,this.s,ce)}recoverPublicKey(ce){const{r:Te,s:Ge,recovery:He}=this,Ze=q((0,i.ensureBytes)("msgHash",ce));if(He==null||![0,1,2,3].includes(He))throw new Error("recovery id invalid");const Fe=He===2||He===3?Te+m.n:Te;if(Fe>=d.ORDER)throw new Error("recovery id 2 or 3 invalid");const it=(He&1)===0?"02":"03",gt=g.fromHex(it+J(Fe)),Bt=H(Fe),jt=X(-Ze*Bt),Nt=X(Ge*Bt),At=g.BASE.multiplyAndAddUnsafe(gt,jt,Nt);if(!At)throw new Error("point at infinify");return At.assertValidity(),At}hasHighS(){return K(this.s)}normalizeS(){return this.hasHighS()?new T(this.r,X(-this.s),this.recovery):this}toDERRawBytes(){return n.hexToBytes(this.toDERHex())}toDERHex(){return e.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return n.hexToBytes(this.toCompactHex())}toCompactHex(){return J(this.r)+J(this.s)}}const C={isValidPrivateKey(te){try{return x(te),!0}catch{return!1}},normPrivateKeyToScalar:x,randomPrivateKey:()=>{const te=m.randomBytes(d.BYTES+8),ce=t.hashToPrivateScalar(te,V);return n.numberToBytesBE(ce,m.nByteLength)},precompute(te=8,ce=g.BASE){return ce._setWindowSize(te),ce.multiply(BigInt(3)),ce}};function k(te,ce=!0){return g.fromPrivateKey(te).toRawBytes(ce)}function re(te){const ce=te instanceof Uint8Array,Te=typeof te=="string",Ge=(ce||Te)&&te.length;return ce?Ge===S||Ge===j:Te?Ge===2*S||Ge===2*j:te instanceof g}function ne(te,ce,Te=!0){if(re(te))throw new Error("first arg must be private key");if(!re(ce))throw new Error("second arg must be public key");return g.fromHex(ce).multiply(x(te)).toRawBytes(Te)}const ee=m.bits2int||function(te){const ce=n.bytesToNumberBE(te),Te=te.length*8-m.nBitLength;return Te>0?ce>>BigInt(Te):ce},q=m.bits2int_modN||function(te){return X(ee(te))},fe=n.bitMask(m.nBitLength);function Ke(te){if(typeof te!="bigint")throw new Error("bigint expected");if(!(l<=te&&te<fe))throw new Error(`bigint expected < 2^${m.nBitLength}`);return n.numberToBytesBE(te,m.nByteLength)}function _e(te,ce,Te=ge){if(["recovered","canonical"].some(Pt=>Pt in Te))throw new Error("sign() legacy options not supported");const{hash:Ge,randomBytes:He}=m;let{lowS:Ze,prehash:Fe,extraEntropy:it}=Te;Ze==null&&(Ze=!0),te=(0,i.ensureBytes)("msgHash",te),Fe&&(te=(0,i.ensureBytes)("prehashed msgHash",Ge(te)));const gt=q(te),Bt=x(ce),jt=[Ke(Bt),Ke(gt)];if(it!=null){const Pt=it===!0?He(d.BYTES):it;jt.push((0,i.ensureBytes)("extraEntropy",Pt,d.BYTES))}const Nt=n.concatBytes(...jt),At=gt;function Wt(Pt){const $t=ee(Pt);if(!Q($t))return;const _r=H($t),Tt=g.BASE.multiply($t).toAffine(),Ct=X(Tt.x);if(Ct===l)return;const Zt=X(_r*X(At+Ct*Bt));if(Zt===l)return;let er=(Tt.x===Ct?0:2)|Number(Tt.y&p),Ft=Zt;return Ze&&K(Zt)&&(Ft=N(Zt),er^=1),new T(Ct,Ft,er)}return{seed:Nt,k2sig:Wt}}const ge={lowS:m.lowS,prehash:!1},ze={lowS:m.lowS,prehash:!1};function We(te,ce,Te=ge){const{seed:Ge,k2sig:He}=_e(te,ce,Te),Ze=m;return n.createHmacDrbg(Ze.hash.outputLen,Ze.nByteLength,Ze.hmac)(Ge,He)}g.BASE._setWindowSize(8);function rt(te,ce,Te,Ge=ze){const He=te;if(ce=(0,i.ensureBytes)("msgHash",ce),Te=(0,i.ensureBytes)("publicKey",Te),"strict"in Ge)throw new Error("options.strict was renamed to lowS");const{lowS:Ze,prehash:Fe}=Ge;let it,gt;try{if(typeof He=="string"||He instanceof Uint8Array)try{it=T.fromDER(He)}catch(Tt){if(!(Tt instanceof e.DER.Err))throw Tt;it=T.fromCompact(He)}else if(typeof He=="object"&&typeof He.r=="bigint"&&typeof He.s=="bigint"){const{r:Tt,s:Ct}=He;it=new T(Tt,Ct)}else throw new Error("PARSE");gt=g.fromHex(Te)}catch(Tt){if(Tt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Ze&&it.hasHighS())return!1;Fe&&(ce=m.hash(ce));const{r:Bt,s:jt}=it,Nt=q(ce),At=H(jt),Wt=X(Nt*At),Pt=X(Bt*At),$t=g.BASE.multiplyAndAddUnsafe(gt,Wt,Pt)?.toAffine();return $t?X($t.x)===Bt:!1}return{CURVE:m,getPublicKey:k,getSharedSecret:ne,sign:We,verify:rt,ProjectivePoint:g,Signature:T,utils:C}}e.weierstrass=D;function Z(v,m){const d=v.ORDER;let V=l;for(let K=d-p;K%B===l;K/=B)V+=p;const S=V,j=B<<S-p-p,W=j*B,X=(d-p)/W,H=(X-p)/B,g=W-p,x=j,A=v.pow(m,X),Q=v.pow(m,(X+p)/B);let J=(K,N)=>{let F=A,T=v.pow(N,g),C=v.sqr(T);C=v.mul(C,N);let k=v.mul(K,C);k=v.pow(k,H),k=v.mul(k,T),T=v.mul(k,N),C=v.mul(k,K);let re=v.mul(C,T);k=v.pow(re,x);let ne=v.eql(k,v.ONE);T=v.mul(C,Q),k=v.mul(re,F),C=v.cmov(T,C,ne),re=v.cmov(k,re,ne);for(let ee=S;ee>p;ee--){let q=ee-B;q=B<<q-p;let fe=v.pow(re,q);const Ke=v.eql(fe,v.ONE);T=v.mul(C,F),F=v.mul(F,F),fe=v.mul(re,F),C=v.cmov(T,C,Ke),re=v.cmov(fe,re,Ke)}return{isValid:ne,value:C}};if(v.ORDER%O===w){const K=(v.ORDER-w)/O,N=v.sqrt(v.neg(m));J=(F,T)=>{let C=v.sqr(T);const k=v.mul(F,T);C=v.mul(C,k);let re=v.pow(C,K);re=v.mul(re,k);const ne=v.mul(re,N),ee=v.mul(v.sqr(re),T),q=v.eql(ee,F);let fe=v.cmov(ne,re,q);return{isValid:q,value:fe}}}return J}e.SWUFpSqrtRatio=Z;function pe(v,m){if(t.validateField(v),!v.isValid(m.A)||!v.isValid(m.B)||!v.isValid(m.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const d=Z(v,m.Z);if(!v.isOdd)throw new Error("Fp.isOdd is not implemented!");return V=>{let S,j,W,X,H,g,x,A;S=v.sqr(V),S=v.mul(S,m.Z),j=v.sqr(S),j=v.add(j,S),W=v.add(j,v.ONE),W=v.mul(W,m.B),X=v.cmov(m.Z,v.neg(j),!v.eql(j,v.ZERO)),X=v.mul(X,m.A),j=v.sqr(W),g=v.sqr(X),H=v.mul(g,m.A),j=v.add(j,H),j=v.mul(j,W),g=v.mul(g,X),H=v.mul(g,m.B),j=v.add(j,H),x=v.mul(S,W);const{isValid:Q,value:J}=d(j,g);A=v.mul(S,V),A=v.mul(A,J),x=v.cmov(x,W,Q),A=v.cmov(A,J,Q);const K=v.isOdd(V)===v.isOdd(A);return A=v.cmov(v.neg(A),A,K),x=v.div(x,X),{x,y:A}}}e.mapToCurveSimpleSWU=pe}(Vr);var wt={};Object.defineProperty(wt,"__esModule",{value:!0}),wt.createHasher=wt.isogenyMap=wt.hash_to_field=wt.expand_message_xof=wt.expand_message_xmd=void 0;const Tc=Ne,Ot=Se;function Oc(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return(0,Ot.utf8ToBytes)(e);throw new Error("DST must be Uint8Array or string")}const Pc=Ot.bytesToNumberBE;function Yt(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const n=Array.from({length:t}).fill(0);for(let i=t-1;i>=0;i--)n[i]=e&255,e>>>=8;return new Uint8Array(n)}function Ic(e,t){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e[i]^t[i];return n}function wr(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function Hn(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Uo(e,t,n,i){wr(e),wr(t),Hn(n),t.length>255&&(t=i((0,Ot.concatBytes)((0,Ot.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:s,blockLen:h}=i,u=Math.ceil(n/s);if(u>255)throw new Error("Invalid xmd length");const b=(0,Ot.concatBytes)(t,Yt(t.length,1)),l=Yt(0,h),p=Yt(n,2),B=new Array(u),w=i((0,Ot.concatBytes)(l,e,p,Yt(0,1),b));B[0]=i((0,Ot.concatBytes)(w,Yt(1,1),b));for(let U=1;U<=u;U++){const $=[Ic(w,B[U-1]),Yt(U+1,1),b];B[U]=i((0,Ot.concatBytes)(...$))}return(0,Ot.concatBytes)(...B).slice(0,n)}wt.expand_message_xmd=Uo;function jo(e,t,n,i,s){if(wr(e),wr(t),Hn(n),t.length>255){const h=Math.ceil(2*i/8);t=s.create({dkLen:h}).update((0,Ot.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:n}).update(e).update(Yt(n,2)).update(t).update(Yt(t.length,1)).digest()}wt.expand_message_xof=jo;function Kn(e,t,n){(0,Ot.validateObject)(n,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:i,k:s,m:h,hash:u,expand:b,DST:l}=n;wr(e),Hn(t);const p=Oc(l),B=i.toString(2).length,w=Math.ceil((B+s)/8),O=t*h*w;let U;if(b==="xmd")U=Uo(e,p,O,u);else if(b==="xof")U=jo(e,p,O,s,u);else if(b==="_internal_pass")U=e;else throw new Error('expand must be "xmd" or "xof"');const $=new Array(t);for(let D=0;D<t;D++){const Z=new Array(h);for(let pe=0;pe<h;pe++){const v=w*(pe+D*h),m=U.subarray(v,v+w);Z[pe]=(0,Tc.mod)(Pc(m),i)}$[D]=Z}return $}wt.hash_to_field=Kn;function Uc(e,t){const n=t.map(i=>Array.from(i).reverse());return(i,s)=>{const[h,u,b,l]=n.map(p=>p.reduce((B,w)=>e.add(e.mul(B,i),w)));return i=e.div(h,u),s=e.mul(s,e.div(b,l)),{x:i,y:s}}}wt.isogenyMap=Uc;function jc(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(i,s){const h=Kn(i,2,{...n,DST:n.DST,...s}),u=e.fromAffine(t(h[0])),b=e.fromAffine(t(h[1])),l=u.add(b).clearCofactor();return l.assertValidity(),l},encodeToCurve(i,s){const h=Kn(i,1,{...n,DST:n.encodeDST,...s}),u=e.fromAffine(t(h[0])).clearCofactor();return u.assertValidity(),u}}}wt.createHasher=jc;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.createCurve=Qt.getHash=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nc=En,No=xt,$c=Vr;function $o(e){return{hash:e,hmac:(t,...n)=>(0,Nc.hmac)(e,t,(0,No.concatBytes)(...n)),randomBytes:No.randomBytes}}Qt.getHash=$o;function Cc(e,t){const n=i=>(0,$c.weierstrass)({...e,...$o(i)});return Object.freeze({...n(t),create:n})}Qt.createCurve=Cc,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t=Ut,n=xt,i=Ne,s=Vr,h=Se,u=wt,b=Qt,l=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),p=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),B=BigInt(1),w=BigInt(2),O=(T,C)=>(T+C/w)/C;function U(T){const C=l,k=BigInt(3),re=BigInt(6),ne=BigInt(11),ee=BigInt(22),q=BigInt(23),fe=BigInt(44),Ke=BigInt(88),_e=T*T*T%C,ge=_e*_e*T%C,ze=(0,i.pow2)(ge,k,C)*ge%C,We=(0,i.pow2)(ze,k,C)*ge%C,rt=(0,i.pow2)(We,w,C)*_e%C,te=(0,i.pow2)(rt,ne,C)*rt%C,ce=(0,i.pow2)(te,ee,C)*te%C,Te=(0,i.pow2)(ce,fe,C)*ce%C,Ge=(0,i.pow2)(Te,Ke,C)*Te%C,He=(0,i.pow2)(Ge,fe,C)*ce%C,Ze=(0,i.pow2)(He,k,C)*ge%C,Fe=(0,i.pow2)(Ze,q,C)*te%C,it=(0,i.pow2)(Fe,re,C)*_e%C,gt=(0,i.pow2)(it,w,C);if(!$.eql($.sqr(gt),T))throw new Error("Cannot find square root");return gt}const $=(0,i.Field)(l,void 0,void 0,{sqrt:U});e.secp256k1=(0,b.createCurve)({a:BigInt(0),b:BigInt(7),Fp:$,n:p,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:T=>{const C=p,k=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),re=-B*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),ne=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),ee=k,q=BigInt("0x100000000000000000000000000000000"),fe=O(ee*T,C),Ke=O(-re*T,C);let _e=(0,i.mod)(T-fe*k-Ke*ne,C),ge=(0,i.mod)(-fe*re-Ke*ee,C);const ze=_e>q,We=ge>q;if(ze&&(_e=C-_e),We&&(ge=C-ge),_e>q||ge>q)throw new Error("splitScalar: Endomorphism failed, k="+T);return{k1neg:ze,k1:_e,k2neg:We,k2:ge}}}},t.sha256);const D=BigInt(0),Z=T=>typeof T=="bigint"&&D<T&&T<l,pe=T=>typeof T=="bigint"&&D<T&&T<p,v={};function m(T,...C){let k=v[T];if(k===void 0){const re=(0,t.sha256)(Uint8Array.from(T,ne=>ne.charCodeAt(0)));k=(0,h.concatBytes)(re,re),v[T]=k}return(0,t.sha256)((0,h.concatBytes)(k,...C))}const d=T=>T.toRawBytes(!0).slice(1),V=T=>(0,h.numberToBytesBE)(T,32),S=T=>(0,i.mod)(T,l),j=T=>(0,i.mod)(T,p),W=e.secp256k1.ProjectivePoint,X=(T,C,k)=>W.BASE.multiplyAndAddUnsafe(T,C,k);function H(T){let C=e.secp256k1.utils.normPrivateKeyToScalar(T),k=W.fromPrivateKey(C);return{scalar:k.hasEvenY()?C:j(-C),bytes:d(k)}}function g(T){if(!Z(T))throw new Error("bad x: need 0 < x < p");const C=S(T*T),k=S(C*T+BigInt(7));let re=U(k);re%w!==D&&(re=S(-re));const ne=new W(T,re,B);return ne.assertValidity(),ne}function x(...T){return j((0,h.bytesToNumberBE)(m("BIP0340/challenge",...T)))}function A(T){return H(T).bytes}function Q(T,C,k=(0,n.randomBytes)(32)){const re=(0,h.ensureBytes)("message",T),{bytes:ne,scalar:ee}=H(C),q=(0,h.ensureBytes)("auxRand",k,32),fe=V(ee^(0,h.bytesToNumberBE)(m("BIP0340/aux",q))),Ke=m("BIP0340/nonce",fe,ne,re),_e=j((0,h.bytesToNumberBE)(Ke));if(_e===D)throw new Error("sign failed: k is zero");const{bytes:ge,scalar:ze}=H(_e),We=x(ge,ne,re),rt=new Uint8Array(64);if(rt.set(ge,0),rt.set(V(j(ze+We*ee)),32),!J(rt,re,ne))throw new Error("sign: Invalid signature produced");return rt}function J(T,C,k){const re=(0,h.ensureBytes)("signature",T,64),ne=(0,h.ensureBytes)("message",C),ee=(0,h.ensureBytes)("publicKey",k,32);try{const q=g((0,h.bytesToNumberBE)(ee)),fe=(0,h.bytesToNumberBE)(re.subarray(0,32));if(!Z(fe))return!1;const Ke=(0,h.bytesToNumberBE)(re.subarray(32,64));if(!pe(Ke))return!1;const _e=x(V(fe),d(q),ne),ge=X(q,Ke,j(-_e));return!(!ge||!ge.hasEvenY()||ge.toAffine().x!==fe)}catch{return!1}}e.schnorr=(()=>({getPublicKey:A,sign:Q,verify:J,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:g,pointToBytes:d,numberToBytesBE:h.numberToBytesBE,bytesToNumberBE:h.bytesToNumberBE,taggedHash:m,mod:i.mod}}))();const K=(()=>(0,u.isogenyMap)($,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(T=>T.map(C=>BigInt(C)))))(),N=(()=>(0,s.mapToCurveSimpleSWU)($,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:$.create(BigInt("-11"))}))(),F=(()=>(0,u.createHasher)(e.secp256k1.ProjectivePoint,T=>{const{x:C,y:k}=N($.create(T[0]));return K(C,k)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:$.ORDER,m:1,k:128,expand:"xmd",hash:t.sha256}))();e.hashToCurve=(()=>F.hashToCurve)(),e.encodeToCurve=(()=>F.encodeToCurve)()}(go);var Gn=Object.defineProperty,Rc=Object.getOwnPropertyDescriptor,Lc=Object.getOwnPropertyNames,Mc=Object.prototype.hasOwnProperty,kc=(e,t)=>{for(var n in t)Gn(e,n,{get:t[n],enumerable:!0})},Dc=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Lc(t))!Mc.call(e,s)&&s!==n&&Gn(e,s,{get:()=>t[s],enumerable:!(i=Rc(t,s))||i.enumerable});return e},Hc=e=>Dc(Gn({},"__esModule",{value:!0}),e),Co={};kc(Co,{Secp256k1PublicKey:()=>ko});var Kc=Hc(Co),Gc=vt,Ro=xr,Lo=nr,Mo=go,Vc=Ut;const Vn=33;class ko extends Ro.PublicKey{constructor(t){if(super(),typeof t=="string"?this.data=(0,Gc.fromB64)(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==Vn)throw new Error(`Invalid public key input. Expected ${Vn} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return Lo.SIGNATURE_SCHEME_TO_FLAG.Secp256k1}async verify(t,n){let i;if(typeof n=="string"){const s=(0,Lo.parseSerializedSignature)(n);if(s.signatureScheme!=="Secp256k1")throw new Error("Invalid signature scheme");if(!(0,Ro.bytesEqual)(this.toRawBytes(),s.publicKey))throw new Error("Signature does not match public key");i=s.signature}else i=n;return Mo.secp256k1.verify(Mo.secp256k1.Signature.fromCompact(i),(0,Vc.sha256)(t),this.toRawBytes())}}ko.SIZE=Vn;var Do={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.secp256r1=e.p256=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t=Qt,n=Ut,i=Ne,s=Vr,h=wt,u=(0,i.Field)(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),b=u.create(BigInt("-3")),l=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b");e.p256=(0,t.createCurve)({a:b,b:l,Fp:u,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},n.sha256),e.secp256r1=e.p256;const p=(()=>(0,s.mapToCurveSimpleSWU)(u,{A:b,B:l,Z:u.create(BigInt("-10"))}))(),B=(()=>(0,h.createHasher)(e.secp256r1.ProjectivePoint,w=>p(w[0]),{DST:"P256_XMD:SHA-256_SSWU_RO_",encodeDST:"P256_XMD:SHA-256_SSWU_NU_",p:u.ORDER,m:1,k:128,expand:"xmd",hash:n.sha256}))();e.hashToCurve=(()=>B.hashToCurve)(),e.encodeToCurve=(()=>B.encodeToCurve)()})(Do);var qn=Object.defineProperty,qc=Object.getOwnPropertyDescriptor,zc=Object.getOwnPropertyNames,Yc=Object.prototype.hasOwnProperty,Wc=(e,t)=>{for(var n in t)qn(e,n,{get:t[n],enumerable:!0})},Zc=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of zc(t))!Yc.call(e,s)&&s!==n&&qn(e,s,{get:()=>t[s],enumerable:!(i=qc(t,s))||i.enumerable});return e},Fc=e=>Zc(qn({},"__esModule",{value:!0}),e),Ho={};Wc(Ho,{Secp256r1PublicKey:()=>qo});var Xc=Fc(Ho),Jc=vt,Ko=xr,Go=nr,Qc=Ut,Vo=Do;const zn=33;class qo extends Ko.PublicKey{constructor(t){if(super(),typeof t=="string"?this.data=(0,Jc.fromB64)(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==zn)throw new Error(`Invalid public key input. Expected ${zn} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return Go.SIGNATURE_SCHEME_TO_FLAG.Secp256r1}async verify(t,n){let i;if(typeof n=="string"){const s=(0,Go.parseSerializedSignature)(n);if(s.signatureScheme!=="Secp256r1")throw new Error("Invalid signature scheme");if(!(0,Ko.bytesEqual)(this.toRawBytes(),s.publicKey))throw new Error("Signature does not match public key");i=s.signature}else i=n;return Vo.secp256r1.verify(Vo.secp256r1.Signature.fromCompact(i),(0,Qc.sha256)(t),this.toRawBytes())}}qo.SIZE=zn;var Yn,zo;function e0(){if(zo)return Yn;zo=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,s=(d,V)=>{for(var S in V)e(d,S,{get:V[S],enumerable:!0})},h=(d,V,S,j)=>{if(V&&typeof V=="object"||typeof V=="function")for(let W of n(V))!i.call(d,W)&&W!==S&&e(d,W,{get:()=>V[W],enumerable:!(j=t(V,W))||j.enumerable});return d},u=d=>h(e({},"__esModule",{value:!0}),d),b={};s(b,{MAX_SIGNER_IN_MULTISIG:()=>Z,MultiSigPublicKey:()=>pe,parsePartialSignatures:()=>v}),Yn=u(b);var l=vt,p=sr,B=xt,w=xr,O=nr,U=Ir,$=mi,D=Wo();const Z=10;class pe extends w.PublicKey{constructor(V){if(super(),typeof V=="string"?(this.rawBytes=(0,l.fromB64)(V),this.multisigPublicKey=$.builder.de("MultiSigPublicKey",this.rawBytes)):V instanceof Uint8Array?(this.rawBytes=V,this.multisigPublicKey=$.builder.de("MultiSigPublicKey",this.rawBytes)):(this.multisigPublicKey=V,this.rawBytes=$.builder.ser("MultiSigPublicKey",V).toBytes()),this.publicKeys=this.multisigPublicKey.pk_map.map(({pubKey:S,weight:j})=>{const[W,X]=Object.entries(S)[0];return{publicKey:(0,D.publicKeyFromRawBytes)(W,Uint8Array.from(X)),weight:j}}),this.publicKeys.length>Z)throw new Error(`Max number of signers in a multisig is ${Z}`)}static fromPublicKeys({threshold:V,publicKeys:S}){return new pe({pk_map:S.map(({publicKey:j,weight:W})=>({pubKey:{[O.SIGNATURE_FLAG_TO_SCHEME[j.flag()]]:Array.from(j.toRawBytes())},weight:W})),threshold:V})}equals(V){return super.equals(V)}toRawBytes(){return this.rawBytes}getPublicKeys(){return this.publicKeys}toSuiAddress(){const V=1+65*Z+2,S=new Uint8Array(V);S.set([O.SIGNATURE_SCHEME_TO_FLAG.MultiSig]),S.set($.builder.ser("u16",this.multisigPublicKey.threshold).toBytes(),1);let j=3;for(const{publicKey:W,weight:X}of this.publicKeys){const H=W.toSuiBytes();S.set(H,j),j+=H.length,S.set([X],j++)}return(0,U.normalizeSuiAddress)((0,B.bytesToHex)((0,p.blake2b)(S.slice(0,j),{dkLen:32})))}flag(){return O.SIGNATURE_SCHEME_TO_FLAG.MultiSig}async verify(V,S){if(typeof S!="string")throw new Error("Multisig verification only supports serialized signature");const{signatureScheme:j,multisig:W}=(0,O.parseSerializedSignature)(S);if(j!=="MultiSig")throw new Error("Invalid signature scheme");let X=0;if(!(0,w.bytesEqual)($.builder.ser("MultiSigPublicKey",this.multisigPublicKey).toBytes(),$.builder.ser("MultiSigPublicKey",W.multisig_pk).toBytes()))return!1;for(const{publicKey:H,weight:g,signature:x}of v(W)){if(!await H.verify(V,x))return!1;X+=g}return X>=this.multisigPublicKey.threshold}combinePartialSignatures(V){let S=0;const j=new Array(V.length);for(let g=0;g<V.length;g++){let x=(0,O.parseSerializedSignature)(V[g]);if(x.signatureScheme==="MultiSig")throw new Error("MultiSig is not supported inside MultiSig");let A=Array.from(x.signature.map(J=>Number(J)));x.signatureScheme==="ED25519"?j[g]={ED25519:A}:x.signatureScheme==="Secp256k1"?j[g]={Secp256k1:A}:x.signatureScheme==="Secp256r1"&&(j[g]={Secp256r1:A});let Q;for(let J=0;J<this.publicKeys.length;J++)if((0,w.bytesEqual)(x.publicKey,this.publicKeys[J].publicKey.toRawBytes())){if(S&1<<J)throw new Error("Received multiple signatures from the same public key");Q=J;break}if(Q===void 0)throw new Error("Received signature from unknown public key");S|=1<<Q}let W={sigs:j,bitmap:S,multisig_pk:this.multisigPublicKey};const X=$.builder.ser("MultiSig",W).toBytes();let H=new Uint8Array(X.length+1);return H.set([O.SIGNATURE_SCHEME_TO_FLAG.MultiSig]),H.set(X,1),(0,l.toB64)(H)}}function v(d){let V=new Array(d.sigs.length);for(let S=0;S<d.sigs.length;S++){const[j,W]=Object.entries(d.sigs[S])[0],X=m(d.bitmap).at(S),H=d.multisig_pk.pk_map[X],g=Uint8Array.from(Object.values(H.pubKey)[0]);if(j==="MultiSig")throw new Error("MultiSig is not supported inside MultiSig");const x=(0,D.publicKeyFromRawBytes)(j,g);V[S]={signatureScheme:j,signature:Uint8Array.from(W),publicKey:x,weight:H.weight}}return V}function m(d){if(d<0||d>1024)throw new Error("Invalid bitmap");let V=[];for(let S=0;S<10;S++)(d&1<<S)!==0&&V.push(S);return Uint8Array.from(V)}return Yn}var Wn,Yo;function Wo(){if(Yo)return Wn;Yo=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,s=(v,m)=>{for(var d in m)e(v,d,{get:m[d],enumerable:!0})},h=(v,m,d,V)=>{if(m&&typeof m=="object"||typeof m=="function")for(let S of n(m))!i.call(v,S)&&S!==d&&e(v,S,{get:()=>m[S],enumerable:!(V=t(m,S))||V.enumerable});return v},u=v=>h(e({},"__esModule",{value:!0}),v),b={};s(b,{publicKeyFromRawBytes:()=>pe,verifyPersonalMessage:()=>$,verifySignature:()=>U,verifyTransactionBlock:()=>D}),Wn=u(b);var l=ii.exports,p=Ya,B=Kc,w=Xc,O=e0();async function U(v,m){const d=Z(m);if(!await d.publicKey.verify(v,d.serializedSignature))throw new Error("Signature is not valid for the provided data");return d.publicKey}async function $(v,m){const d=Z(m);if(!await d.publicKey.verifyPersonalMessage(v,d.serializedSignature))throw new Error("Signature is not valid for the provided message");return d.publicKey}async function D(v,m){const d=Z(m);if(!await d.publicKey.verifyTransactionBlock(v,d.serializedSignature))throw new Error("Signature is not valid for the provided TransactionBlock");return d.publicKey}function Z(v){const m=(0,l.parseSerializedSignature)(v);if(m.signatureScheme==="MultiSig")return{...m,publicKey:new O.MultiSigPublicKey(m.multisig.multisig_pk)};const d=pe(m.signatureScheme,m.publicKey);return{...m,publicKey:d}}function pe(v,m){switch(v){case"ED25519":return new p.Ed25519PublicKey(m);case"Secp256k1":return new B.Secp256k1PublicKey(m);case"Secp256r1":return new w.Secp256r1PublicKey(m);case"MultiSig":return new O.MultiSigPublicKey(m);default:throw new Error(`Unsupported signature scheme ${v}`)}}return Wn}var t0=Wo();function Zn(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}async function r0(e,t){try{const n=await t0.verifyPersonalMessage(Zn(e.messageBytes),e.signature);return Xe.bytesEqual(n.toRawBytes(),t)}catch{return!1}}function n0(e){return new TextDecoder().decode(Zn(e))}tt.Account=Jo,tt.Provider=es,tt.SUI_SYSTEM_STATE_OBJECT_ID=Qo,tt.addressEllipsis=os,tt.formatCurrency=Zr,tt.formatSUI=rs,tt.stringBytesToString=n0,tt.stringBytesToUint8Array=Zn,tt.verifySignedMessage=r0,Object.defineProperties(tt,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
